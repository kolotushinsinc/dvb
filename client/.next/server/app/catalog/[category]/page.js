(()=>{var e={};e.id=583,e.ids=[583],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4990:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>m,routeModule:()=>u,tree:()=>d});var r=t(3137),a=t(4647),l=t(4183),o=t.n(l),n=t(1775),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);t.d(s,i);let c=r.AppPageRouteModule,d=["",{children:["catalog",{children:["[category]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2453)),"/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/catalog/[category]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1335)),"/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,1918,23)),"next/dist/client/components/not-found-error"]}],m=["/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/catalog/[category]/page.tsx"],x="/catalog/[category]/page",h={require:t,loadChunk:()=>Promise.resolve()},u=new c({definition:{kind:a.x.APP_PAGE,page:"/catalog/[category]/page",pathname:"/catalog/[category]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9243:(e,s,t)=>{Promise.resolve().then(t.bind(t,3043)),Promise.resolve().then(t.bind(t,3507)),Promise.resolve().then(t.bind(t,9006))},3043:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>k});var r=t(80),a=t(9885),l=t(7114),o=t(8384),n=t(7371),i=t(8626),c=t(7932),d=t(5894),m=t(9518),x=t(442),h=t(8931),u=t(8106),p=t(3727),g=t(9941),f=t(1440),b=t.n(f),j=t(1157),v=t(997),y=t(5479),w=t(7372),N=t(4653),P=t(1086);let k=function(){let e=(0,l.useParams)(),s=(0,l.useSearchParams)(),t=e.category,f=s.get("search")||"",[k,_]=(0,a.useState)({priceRange:[0,15e3],selectedCategories:[],selectedFilters:{},selectedCountries:[]}),[C,q]=(0,a.useState)(null),{addItem:S}=(0,x.j)(),{toggleFavorite:z,isFavorite:A,isLoggedIn:L,showAuthModal:Z,setShowAuthModal:U}=(0,h.r)(),{categories:E,isLoading:I}=(0,u.L)(),{products:M,loading:T}=(0,p.r)({category:t}),F=(0,p.M)(M,E,k),G=(0,a.useMemo)(()=>f?F.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())||e.description?.toLowerCase().includes(f.toLowerCase())):F,[F,f]),K=E.find(e=>e.slug===t);(0,a.useEffect)(()=>{E.length>0&&!K?q("Категория не найдена"):K&&!K.isActive&&q("Категория неактивна")},[E,K]);let R=(e,s)=>{s.preventDefault(),s.stopPropagation(),S(e),g.Am.success("Товар добавлен в корзину!")},$=async(e,s)=>{if(s.preventDefault(),s.stopPropagation(),!L){U(!0);return}try{await z(e._id);let s=A(e._id)?"Товар удален из избранного":"Товар добавлен в избранное";g.Am.success(s)}catch(e){g.Am.error("Не удалось добавить товар в избранное")}},D=e=>new Intl.NumberFormat("ru-RU").format(e)+" ₽",O=e=>{switch(e){case"glasses":return"Очки";case"clothing":return"Одежда";case"shoes":return"Обувь";case"accessories":return"Аксессуары";case"sale":return"Распродажа";case"new":return"Новинки";default:return e}};return I||T?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-50 to-white",children:r.jsx(v.Loader,{variant:"page",size:"xl",text:`Загрузка товаров категории "${O(t)}"`})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-cream-50 to-white",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,r.jsxs)("div",{className:"mb-12 text-center md:text-left",children:[r.jsx("div",{className:"inline-block mb-4",children:r.jsx("span",{className:"text-sm text-charcoal-500 uppercase tracking-wider font-medium bg-secondary-50 px-3 py-1 rounded-full",children:"Каталог"})}),(0,r.jsxs)("h1",{className:"font-display text-3xl lg:text-5xl font-bold text-charcoal-800 mb-4 tracking-tight",children:[O(t)," ",r.jsx("span",{className:"premium-text",children:"коллекция"})]}),(0,r.jsxs)("p",{className:"text-lg text-charcoal-600 max-w-2xl md:mx-0 mx-auto",children:["Найдено товаров: ",r.jsx("span",{className:"font-semibold",children:G.length}),f&&(0,r.jsxs)("span",{className:"ml-2",children:['по запросу "',r.jsx("span",{className:"font-semibold",children:f}),'"']})]})]}),(0,r.jsxs)("div",{className:"flex gap-8",children:[r.jsx(N.V,{categories:E,products:M,onFilterChange:e=>_(e),initialCategory:K?._id}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:G.map(e=>r.jsx(j.SlideIn,{children:(0,r.jsxs)("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 overflow-hidden border border-secondary-100 premium-shadow",children:[(0,r.jsxs)("div",{className:"relative overflow-hidden bg-secondary-50 h-72",children:[r.jsx(P.w,{src:e.mainImage||"/placeholder-product.jpg",thumbnailSrc:e.thumbnailUrl,alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),(0,r.jsxs)("div",{className:"absolute top-4 left-4 flex flex-col space-y-2",children:[e.isBrandNew&&r.jsx("span",{className:"bg-gradient-to-r from-gold-400 to-gold-600 text-white text-xs px-3 py-1 rounded-full font-semibold shadow-md",children:"НОВОЕ"}),e.isOnSale&&r.jsx("span",{className:"bg-gradient-to-r from-accent-500 to-accent-600 text-white text-xs px-3 py-1 rounded-full font-semibold shadow-md",children:"-20%"})]}),(0,r.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col space-y-3 transition-all duration-300 opacity-0 group-hover:opacity-100 transform translate-x-4 group-hover:translate-x-0",children:[r.jsx(o.z,{size:"icon",variant:"secondary",className:`w-11 h-11 rounded-full bg-white/90 backdrop-blur-sm hover:bg-white shadow-lg hover:shadow-xl ${A(e._id)?"text-accent-500 hover:text-accent-600 hover:scale-110 transition-all duration-300":"text-charcoal-600 hover:text-accent-500 hover:scale-110 transition-all duration-300"}`,onClick:s=>$(e,s),children:r.jsx(n.Z,{className:`w-5 h-5 ${A(e._id)?"fill-current":""}`})}),r.jsx(w.i,{product:e,children:r.jsx(o.z,{size:"icon",variant:"secondary",className:"w-11 h-11 rounded-full bg-white/90 backdrop-blur-sm hover:bg-white shadow-lg hover:shadow-xl text-charcoal-600 hover:text-primary-500 hover:scale-110 transition-all duration-300",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:r.jsx(i.Z,{className:"w-5 h-5"})})})]}),r.jsx("div",{className:"absolute bottom-4 left-4",children:r.jsx("span",{className:"bg-white/90 backdrop-blur-sm text-charcoal-700 text-xs px-4 py-1.5 rounded-full font-medium shadow-sm border border-white/50",children:e.country})})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("span",{className:"text-sm text-charcoal-500 uppercase tracking-wider font-medium bg-secondary-50 px-3 py-1 rounded-full",children:e.categoryId?e.categoryId.name:e.category?e.category.name:""}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 bg-gold-50 px-2 py-1 rounded-full",children:[r.jsx(c.Z,{className:"w-4 h-4 fill-gold-500 text-gold-500"}),r.jsx("span",{className:"text-sm text-charcoal-700 font-medium",children:e.rating||4.5}),(0,r.jsxs)("span",{className:"text-sm text-charcoal-500",children:["(",e.reviewsCount||12,")"]})]})]}),r.jsx(b(),{href:`/product/${e.slug}`,children:r.jsx("h3",{className:"font-heading text-lg font-bold text-charcoal-800 mb-3 group-hover:text-primary-500 transition-colors line-clamp-2 h-14 cursor-pointer",children:e.name})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-secondary-100",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xl font-bold text-charcoal-800",children:D(e.price)}),e.originalPrice&&r.jsx("span",{className:"text-sm text-charcoal-500 line-through",children:D(e.originalPrice)})]}),r.jsx(o.z,{size:"icon",className:"rounded-full bg-gradient-to-r from-primary-400 to-primary-500 hover:from-primary-500 hover:to-primary-600 shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300",onClick:s=>R(e,s),children:r.jsx(d.Z,{className:"w-4 h-4"})})]})]})]})},e._id))}),0===G.length&&r.jsx("div",{className:"text-center py-16 bg-white rounded-2xl shadow-lg border border-secondary-100 premium-card",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[r.jsx("div",{className:"w-20 h-20 bg-secondary-50 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(m.Z,{className:"w-10 h-10 text-secondary-300"})}),r.jsx("h3",{className:"text-2xl font-bold text-charcoal-800 mb-4",children:"По вашим критериям ничего не найдено"}),r.jsx("p",{className:"text-charcoal-600 mb-8",children:"Попробуйте изменить параметры фильтрации или выбрать другую категорию товаров"}),r.jsx(o.z,{variant:"outline",onClick:()=>{_({priceRange:[0,15e3],selectedCategories:K?[K._id]:[],selectedFilters:{},selectedCountries:[]})},className:"border-2 border-secondary-200 hover:border-primary-300 px-6 py-2",children:"Сбросить фильтры"})]})})]})]})]}),r.jsx(y.Q,{isOpen:Z,onClose:()=>U(!1),message:"Для добавления товара в избранное необходимо войти в систему"})]})}},2453:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h,generateStaticParams:()=>x});var r=t(8144),a=t(3830),l=t(1313),o=t(3375),n=t(7536);let i=(0,n.createProxy)(String.raw`/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/catalog/[category]/CategoryPageContent.tsx`),{__esModule:c,$$typeof:d}=i,m=i.default;async function x(){return[{category:"glasses"},{category:"clothing"},{category:"shoes"},{category:"accessories"}]}function h(){return(0,r.jsxs)("div",{className:"min-h-screen bg-cream-50",children:[r.jsx(l.ZP,{}),r.jsx(a.Suspense,{fallback:r.jsx("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Загрузка..."})]})}),children:r.jsx(m,{})}),r.jsx(o.ZP,{})]})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[79,1714,7240,24,1913,9807,1590,1260,7372,6606,4653,2272,3727],()=>t(4990));module.exports=r})();