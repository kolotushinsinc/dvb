(()=>{var e={};e.id=583,e.ids=[583],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4990:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>x,routeModule:()=>u,tree:()=>d});var r=t(3137),a=t(4647),l=t(4183),n=t.n(l),i=t(1775),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let o=r.AppPageRouteModule,d=["",{children:["catalog",{children:["[category]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2453)),"/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/catalog/[category]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1335)),"/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,1918,23)),"next/dist/client/components/not-found-error"]}],x=["/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/catalog/[category]/page.tsx"],m="/catalog/[category]/page",h={require:t,loadChunk:()=>Promise.resolve()},u=new o({definition:{kind:a.x.APP_PAGE,page:"/catalog/[category]/page",pathname:"/catalog/[category]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9243:(e,s,t)=>{Promise.resolve().then(t.bind(t,3043)),Promise.resolve().then(t.bind(t,3507)),Promise.resolve().then(t.bind(t,9006))},3043:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var r=t(80),a=t(9885),l=t(7114),n=t(8384),i=t(7371),c=t(8626),o=t(7932),d=t(5894),x=t(442),m=t(8931),h=t(4372),u=t(3727),g=t(9941),p=t(1440),j=t.n(p),y=t(1157),f=t(5479),v=t(7372),b=t(4653),N=t(1086);let w=function(){let e=(0,l.useParams)(),s=(0,l.useSearchParams)(),t=e.category,p=s.get("search")||"",[w,P]=(0,a.useState)({priceRange:[0,15e3],selectedCategories:[],selectedFilters:{},selectedCountries:[]}),[_,k]=(0,a.useState)(null),{addItem:C}=(0,x.j)(),{toggleFavorite:q,isFavorite:S,isLoggedIn:A,showAuthModal:z,setShowAuthModal:E}=(0,m.r)(),{categories:U,loading:Z}=(0,h.L)(),{products:I,loading:L}=(0,u.r)({category:t}),M=(0,u.M)(I,U,w),T=(0,a.useMemo)(()=>p?M.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())||e.description?.toLowerCase().includes(p.toLowerCase())):M,[M,p]),G=U.find(e=>e.slug===t);(0,a.useEffect)(()=>{U.length>0&&!G?k("Категория не найдена"):G&&!G.isActive&&k("Категория неактивна")},[U,G]);let K=(e,s)=>{s.preventDefault(),s.stopPropagation(),C(e),g.Am.success("Товар добавлен в корзину!")},D=async(e,s)=>{if(s.preventDefault(),s.stopPropagation(),!A){E(!0);return}try{await q(e._id);let s=S(e._id)?"Товар удален из избранного":"Товар добавлен в избранное";g.Am.success(s)}catch(e){g.Am.error("Не удалось добавить товар в избранное")}},F=e=>new Intl.NumberFormat("ru-RU").format(e)+" ₽";return Z||L?r.jsx("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Загрузка товаров..."}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Категория: ",t]})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-cream-50",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"font-display text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:(e=>{switch(e){case"glasses":return"Очки";case"clothing":return"Одежда";case"shoes":return"Обувь";case"accessories":return"Аксессуары";case"sale":return"Распродажа";case"new":return"Новинки";default:return e}})(t)}),(0,r.jsxs)("p",{className:"text-lg text-gray-600",children:["Найдено товаров: ",T.length,p&&(0,r.jsxs)("span",{className:"ml-2",children:['по запросу "',p,'"']})]})]}),(0,r.jsxs)("div",{className:"flex gap-8",children:[r.jsx(b.V,{categories:U,products:I,onFilterChange:e=>P(e),initialCategory:G?._id}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:T.map(e=>r.jsx(y.SlideIn,{children:(0,r.jsxs)("div",{className:"group bg-white rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative overflow-hidden bg-gray-100 h-64",children:[r.jsx(N.w,{src:e.mainImage||"/placeholder-product.jpg",thumbnailSrc:e.thumbnailUrl,alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),(0,r.jsxs)("div",{className:"absolute top-4 left-4 flex flex-col space-y-2",children:[e.isBrandNew&&r.jsx("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full font-semibold",children:"NEW"}),e.isOnSale&&r.jsx("span",{className:"bg-accent text-white text-xs px-2 py-1 rounded-full font-semibold",children:"-20%"})]}),(0,r.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col space-y-2 opacity-0 group-hover:opacity-100 transform translate-x-4 group-hover:translate-x-0 transition-all duration-300",children:[r.jsx(n.z,{size:"icon",variant:"secondary",className:`w-10 h-10 rounded-full bg-white/90 backdrop-blur-sm hover:bg-white shadow-md ${S(e._id)?"text-red-500 hover:text-red-600":"text-gray-600 hover:text-red-500"}`,onClick:s=>D(e,s),children:r.jsx(i.Z,{className:`w-4 h-4 ${S(e._id)?"fill-current":""}`})}),r.jsx(v.i,{product:e,children:r.jsx(n.z,{size:"icon",variant:"secondary",className:"w-10 h-10 rounded-full bg-white/90 backdrop-blur-sm hover:bg-white shadow-md text-gray-600 hover:text-blue-500",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:r.jsx(c.Z,{className:"w-4 h-4"})})})]}),r.jsx("div",{className:"absolute bottom-4 left-4",children:r.jsx("span",{className:"bg-white/90 backdrop-blur-sm text-gray-700 text-xs px-3 py-1 rounded-full font-medium",children:e.country})})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide font-medium",children:e.categoryId?e.categoryId.name:e.category?e.category.name:""}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(o.Z,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-sm text-gray-600",children:e.rating||0}),(0,r.jsxs)("span",{className:"text-sm text-gray-400",children:["(",e.reviewsCount||0,")"]})]})]}),r.jsx(j(),{href:`/product/${e.slug}`,children:r.jsx("h3",{className:"font-heading text-lg font-bold text-gray-900 mb-3 group-hover:text-primary transition-colors cursor-pointer",children:e.name})}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xl font-bold text-primary",children:F(e.price)}),e.originalPrice&&r.jsx("span",{className:"text-sm text-gray-500 line-through",children:F(e.originalPrice)})]}),r.jsx(n.z,{size:"icon",className:"rounded-full bg-primary hover:bg-indigo-700",onClick:s=>K(e,s),children:r.jsx(d.Z,{className:"w-4 h-4"})})]})]})]})},e._id))}),0===T.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-500 text-lg mb-4",children:"По вашим критериям ничего не найдено"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Попробуйте изменить параметры фильтрации"})]})]})]})]}),r.jsx(f.Q,{isOpen:z,onClose:()=>E(!1),message:"Для добавления товара в избранное необходимо войти в систему"})]})}},2453:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h,generateStaticParams:()=>m});var r=t(8144),a=t(3830),l=t(1313),n=t(3375),i=t(7536);let c=(0,i.createProxy)(String.raw`/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/catalog/[category]/CategoryPageContent.tsx`),{__esModule:o,$$typeof:d}=c,x=c.default;async function m(){return[{category:"glasses"},{category:"clothing"},{category:"shoes"},{category:"accessories"}]}function h(){return(0,r.jsxs)("div",{className:"min-h-screen bg-cream-50",children:[r.jsx(l.ZP,{}),r.jsx(a.Suspense,{fallback:r.jsx("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Загрузка..."})]})}),children:r.jsx(x,{})}),r.jsx(n.ZP,{})]})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[6498,7001,7240,5298,1913,9807,1590,4796,6037,1086,7372,6606,4372,2272,1747],()=>t(4990));module.exports=r})();