(()=>{var e={};e.id=1565,e.ids=[1565],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3194:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>c.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>x,routeModule:()=>p,tree:()=>o});var t=a(3137),r=a(4647),l=a(4183),c=a.n(l),i=a(1775),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);a.d(s,n);let d=t.AppPageRouteModule,o=["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9386)),"/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/cart/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,1335)),"/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,1918,23)),"next/dist/client/components/not-found-error"]}],x=["/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/cart/page.tsx"],m="/cart/page",h={require:a,loadChunk:()=>Promise.resolve()},p=new d({definition:{kind:r.x.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2099:(e,s,a)=>{Promise.resolve().then(a.bind(a,7090))},7090:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>k});var t=a(80),r=a(9885),l=a(9006),c=a(3507),i=a(8384),n=a(7052),d=a(9424),o=a(501),x=a(4796),m=a(1839),h=a(6303),p=a(4478),u=a(8375),g=a(2385),j=a(7631),y=a(442),f=a(9941),N=a(1440),b=a.n(N),v=a(6037),w=a(1086);let k=()=>{let{items:e,totalItems:s,totalQuantity:a,totalPrice:N,loading:k,error:z,removeItem:C,updateQuantity:_,clearCart:q}=(0,y.j)(),[P,Z]=(0,r.useState)(""),[A,$]=(0,r.useState)(0),[E,S]=(0,r.useState)(!1),[U,K]=(0,r.useState)(!1),O=async(e,s,a,t)=>{s<1?await C(e,a,t):await _(e,s,a,t)},T=async(e,s,a)=>{await C(e,s,a),f.Am.success("Товар удален из корзины",{style:{color:"#1f2937",background:"#ffffff",border:"1px solid #e5e7eb"}})},G=async()=>{await q(),f.Am.success("Корзина очищена",{style:{color:"#1f2937",background:"#ffffff",border:"1px solid #e5e7eb"}}),K(!1)},I=async()=>{if(0===e.length){f.Am.error("Корзина пуста");return}S(!0);try{window.location.href="/checkout"}catch(e){f.Am.error("Не удалось перейти к оформлению заказа"),S(!1)}},M=e=>new Intl.NumberFormat("ru-RU").format(e)+" ₽",R=N*(1-A/100),B=R>5e3?0:300,L=R+B;return k?t.jsx("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Загрузка корзины..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-cream-50",children:[t.jsx(l.default,{}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[t.jsx("h1",{className:"font-display text-3xl lg:text-4xl font-bold text-gray-900 mb-2",children:"Корзина"}),t.jsx("p",{className:"text-lg text-gray-600",children:s>0?`В корзине ${s} ${1===s?"товар":s<5?"товара":"товаров"}`:"Ваша корзина пуста"})]}),z&&t.jsx("div",{className:"mb-8 p-4 bg-red-50 text-red-700 rounded-lg",children:z}),e.length>0?(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(n.Zb,{children:[t.jsx(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"flex items-center justify-between text-gray-900",children:[t.jsx("span",{children:"Товары в корзине"}),(0,t.jsxs)(m.Vq,{open:U,onOpenChange:K,children:[t.jsx(m.hg,{asChild:!0,children:(0,t.jsxs)(i.z,{variant:"outline",size:"sm",className:"text-red-500 hover:bg-transparent hover:text-red-600 border-transparent",children:[t.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Очистить корзину"]})}),(0,t.jsxs)(m.cZ,{className:"sm:max-w-md",children:[(0,t.jsxs)(m.fK,{children:[t.jsx(m.$N,{className:"text-gray-900",children:"Подтверждение очистки корзины"}),t.jsx(m.Be,{className:"text-gray-700",children:"Вы уверены, что хотите очистить корзину? Все товары будут удалены."})]}),(0,t.jsxs)(m.cN,{children:[t.jsx(i.z,{variant:"outline",onClick:()=>K(!1),className:"hover:bg-transparent hover:text-gray-900",children:"Отмена"}),t.jsx(i.z,{onClick:G,className:"bg-red-500 hover:bg-red-600",children:"Очистить корзину"})]})]})]})]})}),t.jsx(n.aY,{className:"space-y-6",children:e.map(e=>(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pb-6 border-b border-gray-200",children:[t.jsx("div",{className:"w-full sm:w-32 h-32 bg-gray-100 rounded-md overflow-hidden",children:e.product.mainImage?t.jsx(w.w,{src:e.product.mainImage,alt:e.product.name,className:"w-full h-full object-cover"}):e.product.images&&e.product.images.length>0?t.jsx(w.w,{src:e.product.images[0].url,thumbnailSrc:e.product.images[0].thumbnailUrl,alt:e.product.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:t.jsx(p.Z,{className:"h-8 w-8 text-gray-400"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx(b(),{href:`/product/${e.product.slug}`,className:"font-bold text-lg hover:text-primary transition-colors text-gray-900",children:e.product.name}),e.product.category&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.product.category.name}),(e.size||e.color)&&(0,t.jsxs)("div",{className:"flex gap-2 mt-2 items-center",children:[e.size&&(0,t.jsxs)(x.C,{variant:"secondary",children:["Размер: ",e.size]}),e.color&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Цвет:"}),t.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:v.OA(e.color)?.value||"#CCCCCC",borderColor:"Белый"===e.color?"#E5E7EB":void 0},title:e.color})]})]})]}),t.jsx(i.z,{variant:"ghost",size:"icon",onClick:()=>T(e._id,e.size,e.color),className:"text-red-500 hover:bg-transparent hover:text-red-600",children:t.jsx(h.Z,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[t.jsx(i.z,{variant:"ghost",size:"icon",onClick:()=>O(e._id,e.quantity-1,e.size,e.color),disabled:e.quantity<=1,className:"hover:bg-transparent hover:text-gray-700",children:t.jsx(u.Z,{className:"w-4 h-4 text-gray-700"})}),t.jsx("span",{className:"px-4 py-2 text-center min-w-[50px] text-gray-900",children:e.quantity}),t.jsx(i.z,{variant:"ghost",size:"icon",onClick:()=>O(e._id,e.quantity+1,e.size,e.color),className:"hover:bg-transparent hover:text-gray-700",children:t.jsx(g.Z,{className:"w-4 h-4 text-gray-700"})})]}),(0,t.jsxs)("div",{className:"text-right",children:[t.jsx("p",{className:"font-bold text-lg",children:M(e.product.price*e.quantity)}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[M(e.product.price)," \xd7 ",e.quantity]})]})]})]})]},`${e._id}-${e.size||""}-${e.color||""}`))})]}),t.jsx("div",{className:"flex justify-center mt-6",children:t.jsx(b(),{href:"/catalog",children:(0,t.jsxs)(i.z,{variant:"outline",children:[t.jsx(j.Z,{className:"w-4 h-4 mr-2 rotate-180"}),"Продолжить покупки"]})})})]}),t.jsx("div",{className:"lg:col-span-1",children:(0,t.jsxs)(n.Zb,{className:"sticky top-8",children:[t.jsx(n.Ol,{children:t.jsx(n.ll,{className:"text-gray-900",children:"Итого"})}),(0,t.jsxs)(n.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{className:"text-gray-700",children:["Товары (",a," шт.)"]}),t.jsx("span",{className:"text-gray-900",children:M(N)})]}),A>0&&(0,t.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,t.jsxs)("span",{className:"text-gray-700",children:["Скидка (",A,"%)"]}),(0,t.jsxs)("span",{className:"text-gray-900",children:["-",M(N*A/100)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-700",children:"Доставка"}),t.jsx("span",{className:"text-gray-900",children:0===B?"Бесплатно":M(B)})]}),t.jsx(o.Z,{}),(0,t.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[t.jsx("span",{className:"text-gray-700",children:"Итого к оплате"}),t.jsx("span",{className:"text-gray-900",children:M(L)})]}),B>0&&t.jsx("p",{className:"text-sm text-gray-500",children:"Бесплатная доставка при заказе от 5000 ₽"}),(0,t.jsxs)("div",{className:"space-y-2 pt-4",children:[t.jsx("p",{className:"font-medium",children:"Промокод"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[t.jsx(d.I,{placeholder:"Введите промокод",value:P,onChange:e=>Z(e.target.value),className:"bg-gray-50 border-gray-200 focus:bg-white text-gray-900"}),t.jsx(i.z,{variant:"outline",onClick:()=>{"demo10"===P.toLowerCase()?($(10),f.Am.success("Промокод применен! Скидка 10%")):"demo20"===P.toLowerCase()?($(20),f.Am.success("Промокод применен! Скидка 20%")):($(0),f.Am.error("Неверный промокод"))},children:"Применить"})]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Попробуйте промокоды: demo10 или demo20"})]}),(0,t.jsxs)(i.z,{onClick:I,className:"w-full mt-6",disabled:E,children:[E?"Обработка...":"Оформить заказ",t.jsx(j.Z,{className:"w-4 h-4 ml-2"})]}),t.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Нажимая кнопку \xabОформить заказ\xbb, вы соглашаетесь с условиями обработки персональных данных"})]})]})})]}):(0,t.jsxs)("div",{className:"text-center py-16 bg-white rounded-2xl shadow-sm",children:[t.jsx(p.Z,{className:"mx-auto h-16 w-16 text-gray-400"}),t.jsx("h3",{className:"mt-4 text-xl font-medium text-gray-900",children:"Ваша корзина пуста"}),t.jsx("p",{className:"mt-2 text-gray-500 max-w-md mx-auto",children:"Добавьте товары в корзину, чтобы оформить заказ."}),t.jsx("div",{className:"mt-8",children:t.jsx(b(),{href:"/catalog",children:t.jsx(i.z,{className:"px-6",children:"Перейти в каталог"})})})]})]}),t.jsx(c.default,{})]})}},501:(e,s,a)=>{"use strict";a.d(s,{Z:()=>i});var t=a(80),r=a(9885),l=a(2299),c=a(3161);let i=r.forwardRef(({className:e,orientation:s="horizontal",decorative:a=!0,...r},i)=>t.jsx(l.f,{ref:i,decorative:a,orientation:s,className:(0,c.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...r}));i.displayName=l.f.displayName},9386:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>c,__esModule:()=>l,default:()=>n});var t=a(7536);let r=(0,t.createProxy)(String.raw`/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/cart/page.tsx`),{__esModule:l,$$typeof:c}=r,i=r.default,n=i}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[79,7001,2299,1748,9807,1590,7052,4796,6037,1086],()=>a(3194));module.exports=t})();