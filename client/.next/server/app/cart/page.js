(()=>{var e={};e.id=1565,e.ids=[1565],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3194:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>o.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>m,routeModule:()=>u,tree:()=>i});var a=s(3137),t=s(4647),l=s(4183),o=s.n(l),c=s(1775),d={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>c[e]);s.d(r,d);let n=a.AppPageRouteModule,i=["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9386)),"/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/cart/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1335)),"/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,1918,23)),"next/dist/client/components/not-found-error"]}],m=["/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/cart/page.tsx"],x="/cart/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new n({definition:{kind:t.x.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},2099:(e,r,s)=>{Promise.resolve().then(s.bind(s,7090))},7090:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>k});var a=s(80),t=s(9885),l=s(9006),o=s(3507),c=s(8384),d=s(7052),n=s(9424),i=s(501),m=s(4796),x=s(1839),h=s(6303),u=s(4478),p=s(8375),f=s(2385),b=s(7631),j=s(442),g=s(9941),v=s(1440),N=s.n(v),y=s(6037),w=s(1086);let k=()=>{let{items:e,totalItems:r,totalQuantity:s,totalPrice:v,loading:k,error:z,removeItem:C,updateQuantity:_,clearCart:q}=(0,j.j)(),[P,A]=(0,t.useState)(""),[Z,$]=(0,t.useState)(0),[E,M]=(0,t.useState)(!1),[R,S]=(0,t.useState)(!1),U=async(e,r,s,a)=>{r<1?await C(e,s,a):await _(e,r,s,a)},K=async(e,r,s)=>{await C(e,r,s),g.Am.success("Товар удален из корзины",{style:{color:"#1f2937",background:"#ffffff",border:"1px solid #e5e7eb"}})},O=async()=>{await q(),g.Am.success("Корзина очищена",{style:{color:"#1f2937",background:"#ffffff",border:"1px solid #e5e7eb"}}),S(!1)},T=async()=>{if(0===e.length){g.Am.error("Корзина пуста");return}M(!0);try{window.location.href="/checkout"}catch(e){g.Am.error("Не удалось перейти к оформлению заказа"),M(!1)}},B=e=>new Intl.NumberFormat("ru-RU").format(e)+" ₽",G=v*(1-Z/100),I=G>5e3?0:300,F=G+I;return k?a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-50 to-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"w-20 h-20 relative mx-auto mb-6",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-full rounded-full border-4 border-secondary-100 opacity-25"}),a.jsx("div",{className:"absolute top-0 left-0 w-full h-full rounded-full border-4 border-t-primary-400 border-r-transparent border-b-transparent border-l-transparent animate-spin"})]}),a.jsx("p",{className:"text-lg text-charcoal-600 font-medium",children:"Загрузка корзины..."}),a.jsx("p",{className:"mt-2 text-charcoal-500",children:"Пожалуйста, подождите"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-cream-50 to-white",children:[a.jsx(l.Header,{}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)("div",{className:"mb-12 text-center md:text-left",children:[a.jsx("div",{className:"inline-block mb-4",children:a.jsx("span",{className:"text-sm text-charcoal-500 uppercase tracking-wider font-medium bg-secondary-50 px-3 py-1 rounded-full",children:"Оформление заказа"})}),(0,a.jsxs)("h1",{className:"font-display text-3xl lg:text-5xl font-bold text-charcoal-800 mb-4 tracking-tight",children:["Корзина ",a.jsx("span",{className:"premium-text",children:"покупок"})]}),a.jsx("p",{className:"text-lg text-charcoal-600 max-w-2xl md:mx-0 mx-auto",children:r>0?`В корзине ${r} ${1===r?"товар":r<5?"товара":"товаров"}`:"Ваша корзина пуста"})]}),z&&a.jsx("div",{className:"mb-8 p-6 bg-red-50 text-red-700 rounded-2xl border border-red-100 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),z]})}),e.length>0?(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)(d.Zb,{className:"border-secondary-100 shadow-lg premium-shadow rounded-2xl overflow-hidden",children:[a.jsx(d.Ol,{className:"bg-gradient-to-r from-cream-50 to-white border-b border-secondary-100",children:(0,a.jsxs)(d.ll,{className:"flex items-center justify-between text-charcoal-800",children:[a.jsx("span",{className:"font-heading",children:"Товары в корзине"}),(0,a.jsxs)(x.Vq,{open:R,onOpenChange:S,children:[a.jsx(x.hg,{asChild:!0,children:(0,a.jsxs)(c.z,{variant:"outline",size:"sm",className:"text-red-500 hover:bg-red-50 hover:text-red-600 border border-red-200 rounded-full",children:[a.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Очистить корзину"]})}),(0,a.jsxs)(x.cZ,{className:"sm:max-w-md rounded-2xl border-secondary-100 shadow-lg premium-shadow",children:[(0,a.jsxs)(x.fK,{className:"border-b border-secondary-100 pb-4",children:[a.jsx(x.$N,{className:"text-charcoal-800 font-heading",children:"Подтверждение очистки корзины"}),a.jsx(x.Be,{className:"text-charcoal-600 mt-2",children:"Вы уверены, что хотите очистить корзину? Все товары будут удалены."})]}),(0,a.jsxs)(x.cN,{className:"pt-4 space-x-3",children:[a.jsx(c.z,{variant:"outline",onClick:()=>S(!1),className:"border-2 border-secondary-200 hover:border-charcoal-300 hover:text-charcoal-800 rounded-full px-6",children:"Отмена"}),a.jsx(c.z,{onClick:O,className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-full px-6 shadow-md hover:shadow-lg",children:"Очистить корзину"})]})]})]})]})}),a.jsx(d.aY,{className:"space-y-6",children:e.map(e=>(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-6 pb-8 border-b border-secondary-100 hover:bg-cream-50/30 transition-colors p-4 rounded-xl",children:[a.jsx("div",{className:"w-full sm:w-36 h-36 bg-secondary-50 rounded-xl overflow-hidden shadow-sm border border-secondary-100",children:e.product.mainImage?a.jsx(w.w,{src:e.product.mainImage,alt:e.product.name,className:"w-full h-full object-cover"}):e.product.images&&e.product.images.length>0?a.jsx(w.w,{src:e.product.images[0].url,thumbnailSrc:e.product.images[0].thumbnailUrl,alt:e.product.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:a.jsx(u.Z,{className:"h-8 w-8 text-gray-400"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx(N(),{href:`/product/${e.product.slug}`,className:"font-heading font-bold text-lg hover:text-primary-500 transition-colors text-charcoal-800",children:e.product.name}),e.product.category&&a.jsx("div",{className:"mt-2",children:a.jsx("span",{className:"text-xs text-charcoal-500 uppercase tracking-wider font-medium bg-secondary-50 px-2 py-1 rounded-full",children:e.product.category.name})}),(e.size||e.color)&&(0,a.jsxs)("div",{className:"flex gap-3 mt-3 items-center",children:[e.size&&(0,a.jsxs)(m.C,{variant:"outline",className:"bg-secondary-50 text-charcoal-700 border-secondary-200 px-3 py-1 rounded-full",children:["Размер: ",e.size]}),e.color&&(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-secondary-50 px-3 py-1 rounded-full border border-secondary-200",children:[a.jsx("span",{className:"text-xs text-charcoal-600",children:"Цвет:"}),a.jsx("div",{className:"w-4 h-4 rounded-full border shadow-sm",style:{backgroundColor:y.OA(e.color)?.value||"#CCCCCC",borderColor:"Белый"===e.color?"#E5E7EB":void 0},title:e.color}),a.jsx("span",{className:"text-xs text-charcoal-700",children:e.color})]})]})]}),a.jsx(c.z,{variant:"outline",size:"icon",onClick:()=>K(e._id,e.size,e.color),className:"text-red-500 hover:bg-red-50 hover:text-red-600 border border-red-200 rounded-full h-8 w-8",children:a.jsx(h.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center border border-secondary-200 rounded-full bg-secondary-50 shadow-sm",children:[a.jsx(c.z,{variant:"ghost",size:"icon",onClick:()=>U(e._id,e.quantity-1,e.size,e.color),disabled:e.quantity<=1,className:"hover:bg-secondary-100 hover:text-charcoal-700 rounded-full h-9 w-9",children:a.jsx(p.Z,{className:"w-4 h-4 text-charcoal-600"})}),a.jsx("span",{className:"px-4 py-2 text-center min-w-[50px] text-charcoal-800 font-medium",children:e.quantity}),a.jsx(c.z,{variant:"ghost",size:"icon",onClick:()=>U(e._id,e.quantity+1,e.size,e.color),className:"hover:bg-secondary-100 hover:text-charcoal-700 rounded-full h-9 w-9",children:a.jsx(f.Z,{className:"w-4 h-4 text-charcoal-600"})})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold text-xl text-charcoal-800",children:B(e.product.price*e.quantity)}),(0,a.jsxs)("p",{className:"text-sm text-charcoal-500 mt-1",children:[B(e.product.price)," \xd7 ",e.quantity]})]})]})]})]},`${e._id}-${e.size||""}-${e.color||""}`))})]}),a.jsx("div",{className:"flex justify-center mt-8",children:a.jsx(N(),{href:"/catalog",children:(0,a.jsxs)(c.z,{variant:"outline",className:"border-2 border-secondary-200 hover:border-primary-300 hover:text-primary-600 font-medium px-6 py-6 h-auto rounded-full shadow-sm hover:shadow-md transition-all duration-300",children:[a.jsx(b.Z,{className:"w-5 h-5 mr-2 rotate-180"}),"Продолжить покупки"]})})})]}),a.jsx("div",{className:"lg:col-span-1",children:(0,a.jsxs)(d.Zb,{className:"sticky top-8 border-secondary-100 shadow-lg premium-shadow rounded-2xl overflow-hidden",children:[a.jsx(d.Ol,{className:"bg-gradient-to-r from-cream-50 to-white border-b border-secondary-100",children:a.jsx(d.ll,{className:"text-charcoal-800 font-heading",children:"Итого"})}),(0,a.jsxs)(d.aY,{className:"space-y-5 pt-6",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-charcoal-600",children:["Товары (",s," шт.)"]}),a.jsx("span",{className:"text-charcoal-800 font-medium",children:B(v)})]}),Z>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-charcoal-600",children:["Скидка (",Z,"%)"]}),(0,a.jsxs)("span",{className:"text-green-600 font-medium",children:["-",B(v*Z/100)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-charcoal-600",children:"Доставка"}),a.jsx("span",{className:`font-medium ${0===I?"text-green-600":"text-charcoal-800"}`,children:0===I?"Бесплатно":B(I)})]}),a.jsx(i.Z,{className:"bg-secondary-100"}),(0,a.jsxs)("div",{className:"flex justify-between font-bold text-xl",children:[a.jsx("span",{className:"text-charcoal-800",children:"Итого к оплате"}),a.jsx("span",{className:"premium-text",children:B(F)})]}),I>0&&a.jsx("div",{className:"bg-cream-50 rounded-xl p-3 border border-secondary-100",children:(0,a.jsxs)("p",{className:"text-sm text-charcoal-600 flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-primary-500",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Бесплатная доставка при заказе от 5000 ₽"]})}),(0,a.jsxs)("div",{className:"space-y-3 pt-4 bg-secondary-50 p-4 rounded-xl border border-secondary-100",children:[a.jsx("p",{className:"font-medium text-charcoal-800",children:"Промокод"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(n.I,{placeholder:"Введите промокод",value:P,onChange:e=>A(e.target.value),className:"bg-white border-secondary-200 focus:border-primary-300 focus:ring-primary-200 text-charcoal-800 rounded-lg"}),a.jsx(c.z,{variant:"outline",onClick:()=>{"demo10"===P.toLowerCase()?($(10),g.Am.success("Промокод применен! Скидка 10%")):"demo20"===P.toLowerCase()?($(20),g.Am.success("Промокод применен! Скидка 20%")):($(0),g.Am.error("Неверный промокод"))},className:"border-secondary-200 hover:border-primary-300 hover:text-primary-600",children:"Применить"})]}),(0,a.jsxs)("p",{className:"text-xs text-charcoal-500 italic",children:["Попробуйте промокоды: ",a.jsx("span",{className:"font-medium",children:"demo10"})," или ",a.jsx("span",{className:"font-medium",children:"demo20"})]})]}),(0,a.jsxs)(c.z,{onClick:T,className:"w-full mt-6 bg-gradient-to-r from-primary-400 to-primary-500 hover:from-primary-500 hover:to-primary-600 text-primary-900 font-medium px-6 py-6 h-auto rounded-full shadow-lg hover:shadow-xl transition-all duration-300 border-none",disabled:E,children:[E?"Обработка...":"Оформить заказ",a.jsx(b.Z,{className:"w-5 h-5 ml-2"})]}),(0,a.jsxs)("p",{className:"text-xs text-charcoal-500 text-center mt-4",children:["Нажимая кнопку \xabОформить заказ\xbb, вы соглашаетесь с ",a.jsx(N(),{href:"/terms",className:"text-primary-500 hover:underline",children:"условиями обработки"})," персональных данных"]})]})]})})]}):(0,a.jsxs)("div",{className:"text-center py-20 bg-white rounded-2xl shadow-lg border border-secondary-100 premium-shadow",children:[a.jsx("div",{className:"w-24 h-24 bg-secondary-50 rounded-full flex items-center justify-center mx-auto mb-6 border border-secondary-100",children:a.jsx(u.Z,{className:"h-12 w-12 text-secondary-300"})}),a.jsx("h3",{className:"mt-4 text-2xl font-bold text-charcoal-800 font-heading",children:"Ваша корзина пуста"}),a.jsx("p",{className:"mt-4 text-charcoal-600 max-w-md mx-auto",children:"Добавьте товары в корзину, чтобы оформить заказ. В нашем каталоге вы найдете множество интересных товаров."}),a.jsx("div",{className:"mt-10",children:a.jsx(N(),{href:"/catalog",children:a.jsx(c.z,{className:"bg-gradient-to-r from-primary-400 to-primary-500 hover:from-primary-500 hover:to-primary-600 text-primary-900 font-medium px-8 py-6 h-auto rounded-full shadow-lg hover:shadow-xl transition-all duration-300 border-none",children:"Перейти в каталог"})})})]})]}),a.jsx(o.Footer,{})]})}},9386:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>o,__esModule:()=>l,default:()=>d});var a=s(7536);let t=(0,a.createProxy)(String.raw`/Users/mikhailkolotushin/KolTech/projects/dvb/client/app/cart/page.tsx`),{__esModule:l,$$typeof:o}=t,c=t.default,d=c}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[79,1714,2299,1748,9807,1590,7052,1260,3711],()=>s(3194));module.exports=a})();