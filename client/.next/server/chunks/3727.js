"use strict";exports.id=3727,exports.ids=[3727],exports.modules={3727:(e,t,r)=>{r.d(t,{M:()=>n,r:()=>l});var a=r(9885),s=r(7936);let o=null,c=!1,l=(e={})=>{let[t,r]=(0,a.useState)(o||[]),[l,n]=(0,a.useState)(!o),[d,i]=(0,a.useState)(null),u=(0,a.useCallback)(async()=>{if(o&&!e.category&&!e.search){r(o),n(!1);return}if(!c){c=!0;try{n(!0),i(null);let t=await s.h.products.getAll(e),a=[];console.log("\uD83D\uDD0D Processing response format:",{hasData:!!t?.data,dataIsArray:Array.isArray(t?.data),hasSuccess:t?.success,hasProducts:!!t?.products,productsIsArray:Array.isArray(t?.products),isDirectArray:Array.isArray(t)}),t&&t.data&&Array.isArray(t.data)?(a=t.data,console.log("âœ… Using direct data format, count:",a.length)):t&&!0===t.success&&t.data&&t.data.products&&Array.isArray(t.data.products)?(a=t.data.products,console.log("âœ… Using nested data.products format, count:",a.length)):t&&t.products&&Array.isArray(t.products)?(a=t.products,console.log("âœ… Using direct products format, count:",a.length)):t&&t.data&&Array.isArray(t.data)?(a=t.data,console.log("âœ… Using direct data array format, count:",a.length)):Array.isArray(t)&&(a=t,console.log("âœ… Using direct array format, count:",a.length)),e.category||e.search||(o=a),0===a.length&&console.warn(`ðŸš¨ No products found`),r(a)}catch(e){i("ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹"),console.error("Load error:",e)}finally{n(!1),c=!1}}},[e.category,e.search]);(0,a.useEffect)(()=>{console.log("\uD83D\uDD27 PRODUCTS HOOK - Component mounted or options changed, calling loadProducts"),u()},[u]);let g=(0,a.useCallback)(()=>{e.category||e.search||(o=null),u()},[u]);return{products:t,loading:l,error:d,refreshProducts:g}},n=(e,t,r)=>{let s=(0,a.useMemo)(()=>(console.log("\uD83D\uDD0D FILTER DEBUG - Starting filter:",{totalProducts:e.length,selectedCategories:r.selectedCategories,priceRange:r.priceRange}),e.filter(e=>{let t=e.price>=r.priceRange[0]&&e.price<=r.priceRange[1],a=!0;r.selectedCategories.length>0&&(a=e.categoryId&&e.categoryId._id?r.selectedCategories.includes(e.categoryId._id):!!e.category&&!!e.category._id&&r.selectedCategories.includes(e.category._id));let s=0===r.selectedCountries.length||e.country&&r.selectedCountries.includes(e.country),o=!0;if(Object.keys(r.selectedFilters).length>0&&e.attributes){for(let[t,a]of Object.entries(r.selectedFilters))if(a.length>0){let r=e.attributes[t];Array.isArray(r)?o=o&&a.some(e=>r.includes(e)):"string"==typeof r?o=o&&a.includes(r):"number"==typeof r&&(o=o&&a.includes(r.toString()))}}return t&&a&&s&&o})),[e,r]);return s}}};