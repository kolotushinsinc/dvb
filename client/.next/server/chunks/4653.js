"use strict";exports.id=4653,exports.ids=[4653],exports.modules={4653:(e,l,a)=>{a.d(l,{V:()=>u});var s=a(80),t=a(9885),r=a(8384),i=a(3780),c=a(589),o=a(8971),n=a(2029),d=a(6206);let u=({categories:e,products:l,onFilterChange:a,initialCategory:u})=>{let[b,v]=(0,t.useState)(!1),[m,y]=(0,t.useState)({priceRange:[0,15e3],selectedCategories:u?[u]:[],selectedFilters:{},selectedCountries:[],sortBy:"popularity"});(0,t.useEffect)(()=>{u&&!m.selectedCategories.includes(u)&&y(e=>({...e,selectedCategories:[u]}))},[u]);let p=1===m.selectedCategories.length?e.find(e=>e._id===m.selectedCategories[0]):null,h=(e=>{switch(e){case"GLASSES":return[{key:"gender",label:"Пол",type:"CHECKBOX",options:[{value:"MALE",label:"Мужской"},{value:"FEMALE",label:"Женский"},{value:"UNISEX",label:"Унисекс"}],isActive:!0},{key:"frameMaterial",label:"Материал оправы",type:"CHECKBOX",options:[{value:"Ацетат",label:"Ацетат"},{value:"Алюминий",label:"Алюминий"},{value:"Углеродное волокно",label:"Углеродное волокно"},{value:"Нейлон",label:"Нейлон"},{value:"Пластмасса",label:"Пластмасса"},{value:"Смола",label:"Смола"},{value:"Резина",label:"Резина"},{value:"Нержавеющая сталь",label:"Нержавеющая сталь"},{value:"Титан",label:"Титан"},{value:"Дерево",label:"Дерево"}],isActive:!0},{key:"frameStyle",label:"Стиль обода оправы",type:"CHECKBOX",options:[{value:"FULL_RIM",label:"Полный обод"},{value:"RIMLESS",label:"Безободковый"},{value:"SEMI_RIMLESS",label:"Полубезободковый"}],isActive:!0},{key:"lensType",label:"Тип объектива",type:"CHECKBOX",options:[{value:"Classic",label:"Classic"},{value:"Flash",label:"Flash"},{value:"Gradient",label:"Gradient"},{value:"Mirrored",label:"Mirrored"},{value:"Polarized",label:"Polarized"},{value:"Standard",label:"Standard"}],isActive:!0},{key:"availability",label:"Наличие",type:"CHECKBOX",options:[{value:"IN_STOCK",label:"Товар в наличии"},{value:"PRE_ORDER",label:"Предзаказ"}],isActive:!0}];case"SHOES":return[{key:"gender",label:"Пол",type:"CHECKBOX",options:[{value:"MALE",label:"Мужская"},{value:"FEMALE",label:"Женская"},{value:"UNISEX",label:"Унисекс"}],isActive:!0},{key:"shoeSizeSystem",label:"Система размеров",type:"SELECT",options:[{value:"RUS",label:"Российский (RUS)"},{value:"EU",label:"Европейский (EU)"},{value:"US",label:"Американский (US)"},{value:"CM",label:"См (Длина стельки)"}],isActive:!0},{key:"upperMaterial",label:"Материал верха",type:"CHECKBOX",options:[{value:"Натуральная кожа",label:"Натуральная кожа"},{value:"Замша",label:"Замша"},{value:"Нубук",label:"Нубук"},{value:"Текстиль/Холст",label:"Текстиль/Холст"},{value:"Сетка (Мэш)",label:"Сетка (Мэш)"},{value:"Искусственная кожа",label:"Искусственная кожа"},{value:"Резина",label:"Резина"},{value:"Комбинированные материалы",label:"Комбинированные материалы"}],isActive:!0},{key:"soleType",label:"Тип подошвы",type:"CHECKBOX",options:[{value:"Плоская",label:"Плоская (для скейтбординга)"},{value:"Амортизирующая",label:"Амортизирующая (для бега)"},{value:"Резиновая",label:"Резиновая (для трейла)"},{value:"Каучуковая",label:"Каучуковая"},{value:"EVA",label:"EVA (легкая)"}],isActive:!0},{key:"brandTechnology",label:"Технологии брендов",type:"CHECKBOX",options:[{value:"Air Max",label:"Nike: Air Max"},{value:"Air Force",label:"Nike: Air Force"},{value:"Dunk",label:"Nike: Dunk"},{value:"Jordan",label:"Nike: Jordan"},{value:"ZoomX",label:"Nike: ZoomX"},{value:"React",label:"Nike: React"},{value:"Flyknit",label:"Nike: Flyknit"},{value:"Boost",label:"Adidas: Boost"},{value:"Ultraboost",label:"Adidas: Ultraboost"},{value:"NMD",label:"Adidas: NMD"},{value:"Yeezy",label:"Adidas: Yeezy"},{value:"4D",label:"Adidas: 4D"},{value:"Primeknit",label:"Adidas: Primeknit"},{value:"Fresh Foam",label:"New Balance: Fresh Foam"},{value:"FuelCell",label:"New Balance: FuelCell"},{value:"GEL",label:"Asics: GEL"},{value:"GORE-TEX",label:"GORE-TEX"},{value:"VIBRAM",label:"VIBRAM"}],isActive:!0},{key:"availability",label:"Наличие",type:"CHECKBOX",options:[{value:"IN_STOCK",label:"Товар в наличии"},{value:"PRE_ORDER",label:"Предзаказ"}],isActive:!0}];case"CLOTHING":return[{key:"gender",label:"Пол",type:"CHECKBOX",options:[{value:"MALE",label:"Мужское"},{value:"FEMALE",label:"Женское"},{value:"UNISEX",label:"Унисекс"}],isActive:!0},{key:"clothingSizeSystem",label:"Система размеров",type:"SELECT",options:[{value:"INT",label:"Международные"},{value:"RUS",label:"Российские"},{value:"US",label:"Американские"}],isActive:!0},{key:"fabric",label:"Материал",type:"CHECKBOX",options:[{value:"Хлопок",label:"Хлопок"},{value:"Полиэстер",label:"Полиэстер"},{value:"Нейлон",label:"Нейлон"},{value:"Шерсть",label:"Шерсть"},{value:"Кашемир",label:"Кашемир"},{value:"Деним",label:"Деним"},{value:"Кожа",label:"Кожа"},{value:"Замша",label:"Замша"},{value:"Флис",label:"Флис"},{value:"Вискоза",label:"Вискоза"},{value:"Лен",label:"Лен"}],isActive:!0},{key:"style",label:"Стиль",type:"CHECKBOX",options:[{value:"Повседневный",label:"Повседневный (Кэжуал)"},{value:"Спортивный",label:"Спортивный (Эйджис)"},{value:"Уличный стиль",label:"Уличный стиль (Стритвир)"},{value:"Официальный",label:"Официальный (Деловой)"},{value:"Винтаж",label:"Винтаж"},{value:"Минимализм",label:"Минимализм"},{value:"Хай-фэшн",label:"Хай-фэшн (Дизайнерский)"}],isActive:!0},{key:"pattern",label:"Рисунок/Принт",type:"CHECKBOX",options:[{value:"Однотонный",label:"Однотонный"},{value:"С логотипом",label:"С логотипом"},{value:"Графический принт",label:"Графический принт"},{value:"Полоска",label:"Полоска"},{value:"Камуфляж",label:"Камуфляж"},{value:"Цветочный принт",label:"Цветочный принт"},{value:"Надписи",label:"Надписи"},{value:"Без принта",label:"Без принта"}],isActive:!0},{key:"availability",label:"Наличие",type:"CHECKBOX",options:[{value:"IN_STOCK",label:"Товар в наличии"},{value:"PRE_ORDER",label:"Предзаказ"}],isActive:!0}];case"ACCESSORIES":return[{key:"gender",label:"Пол",type:"CHECKBOX",options:[{value:"MALE",label:"Мужской"},{value:"FEMALE",label:"Женский"},{value:"UNISEX",label:"Унисекс"}],isActive:!0},{key:"material",label:"Материал",type:"CHECKBOX",options:[{value:"Кожа",label:"Кожа"},{value:"Текстиль",label:"Текстиль"},{value:"Металл",label:"Металл"},{value:"Пластик",label:"Пластик"},{value:"Дерево",label:"Дерево"}],isActive:!0},{key:"style",label:"Стиль",type:"CHECKBOX",options:[{value:"Повседневный",label:"Повседневный"},{value:"Спортивный",label:"Спортивный"},{value:"Официальный",label:"Официальный"},{value:"Винтаж",label:"Винтаж"}],isActive:!0},{key:"availability",label:"Наличие",type:"CHECKBOX",options:[{value:"IN_STOCK",label:"Товар в наличии"},{value:"PRE_ORDER",label:"Предзаказ"}],isActive:!0}];default:return[]}})(p?.categoryType),x=Array.from(new Set(l.map(e=>e.country).filter(Boolean))).map(e=>({id:e,name:e,count:l.filter(l=>l.country===e).length})),g=e.map(e=>({id:e._id,slug:e.slug,name:e.name,count:l.filter(l=>l.categoryId&&l.categoryId._id===e._id||l.category&&l.category._id===e._id).length}));(0,t.useEffect)(()=>{C()},[m,l]);let C=()=>{let e=l.filter(e=>{let l=e.price>=m.priceRange[0]&&e.price<=m.priceRange[1],a=!0;m.selectedCategories.length>0&&(a=e.categoryId&&e.categoryId._id?m.selectedCategories.includes(e.categoryId._id):!!e.category&&!!e.category._id&&m.selectedCategories.includes(e.category._id));let s=0===m.selectedCountries.length||e.country&&m.selectedCountries.includes(e.country),t=!0;if(Object.keys(m.selectedFilters).length>0&&e.attributes){for(let[l,a]of Object.entries(m.selectedFilters))if(a.length>0){let s=e.attributes[l];Array.isArray(s)?t=t&&a.some(e=>s.includes(e)):"string"==typeof s?t=t&&a.includes(s):"number"==typeof s&&(t=t&&a.includes(s.toString()))}}return l&&a&&s&&t});switch(m.sortBy){case"price-low":e=e.sort((e,l)=>e.price-l.price);break;case"price-high":e=e.sort((e,l)=>l.price-e.price);break;case"rating":e=e.sort((e,l)=>(l.rating||0)-(e.rating||0));break;case"new":e=e.sort((e,l)=>(l.isBrandNew?1:0)-(e.isBrandNew?1:0));break;default:e=e.sort((e,l)=>(l.rating||0)*(l.reviewsCount||0)-(e.rating||0)*(e.reviewsCount||0))}a(m)},f=(e,l)=>{y(a=>({...a,selectedCategories:l?[...a.selectedCategories,e]:a.selectedCategories.filter(l=>l!==e)}))},N=(e,l)=>{y(a=>({...a,selectedCountries:l?[...a.selectedCountries,e]:a.selectedCountries.filter(l=>l!==e)}))},E=(e,l,a)=>{y(s=>{let t=s.selectedFilters[e]||[],r=a?[...t,l]:t.filter(e=>e!==l);return{...s,selectedFilters:{...s.selectedFilters,[e]:r}}})},j=()=>{y({priceRange:[0,15e3],selectedCategories:u?[u]:[],selectedFilters:{},selectedCountries:[],sortBy:"popularity"})},k=e=>new Intl.NumberFormat("ru-RU").format(e)+" ₽",A=e=>{let l=m.selectedFilters[e.key]||[];switch(e.type){case"SELECT":return(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-heading text-lg font-semibold mb-5 text-charcoal-800 border-b border-secondary-100 pb-2",children:e.label}),(0,s.jsxs)(o.Ph,{value:l[0]||"",onValueChange:l=>E(e.key,l,!!l),children:[s.jsx(o.i4,{className:"border-secondary-200 focus:ring-primary-300 focus:border-primary-300 bg-secondary-50",children:s.jsx(o.ki,{placeholder:`Выберите ${e.label.toLowerCase()}`})}),s.jsx(o.Bw,{className:"border-secondary-200",children:e.options?.map(e=>s.jsx(o.Ql,{value:e.value,className:"focus:bg-primary-50 focus:text-primary-600",children:e.label},e.value))})]})]},e.key);case"MULTI_SELECT":case"CHECKBOX":return(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-heading text-lg font-semibold mb-5 text-charcoal-800 border-b border-secondary-100 pb-2",children:e.label}),s.jsx("div",{className:"space-y-4",children:e.options?.map(a=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(i.X,{id:`${e.key}-${a.value}`,checked:l.includes(a.value),onCheckedChange:l=>E(e.key,a.value,l),className:"text-primary-500 border-secondary-200 focus:ring-primary-300"}),s.jsxs("label",{htmlFor:`${e.key}-${a.value}`,className:"flex-1 text-sm cursor-pointer font-medium text-charcoal-700",children:[a.label,void 0!==a.count&&s.jsxs("span",{className:"text-charcoal-400 ml-1",children:["(",a.count,")"]})]})]},a.value))})]},e.key);case"RANGE":return(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-heading text-lg font-semibold mb-4",children:e.label}),s.jsx(c.i,{value:[l[0]?parseInt(l[0]):e.min||0],onValueChange:l=>E(e.key,l[0].toString(),!0),max:e.max||100,step:1,className:"w-full"}),(0,s.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,s.jsxs)("span",{children:[e.min||0,e.unit]}),(0,s.jsxs)("span",{children:[l[0]||e.min||0,e.unit]}),(0,s.jsxs)("span",{children:[e.max||100,e.unit]})]})]},e.key);case"COLOR":return(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-heading text-lg font-semibold mb-4",children:e.label}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.options?.map(a=>s.jsx("button",{className:`w-8 h-8 rounded-full border-2 ${l.includes(a.value)?"border-primary scale-110":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:a.value},onClick:()=>E(e.key,a.value,!l.includes(a.value)),title:a.label},a.value))})]},e.key);default:return null}};return(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"lg:hidden fixed bottom-4 right-4 z-50",children:s.jsx(r.z,{onClick:()=>v(!b),className:"rounded-full shadow-lg bg-gradient-to-r from-primary-400 to-primary-500 hover:from-primary-500 hover:to-primary-600",size:"lg",children:s.jsx(n.Z,{className:"w-5 h-5"})})}),(0,s.jsxs)("div",{className:`${b?"fixed inset-0 z-40 bg-white p-6 lg:relative lg:inset-auto lg:z-auto lg:bg-transparent lg:p-0":"hidden"} lg:block w-full lg:w-80 lg:flex-shrink-0`,children:[b&&(0,s.jsxs)("div",{className:"lg:hidden flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"font-heading text-2xl font-bold text-charcoal-800",children:"Фильтры"}),s.jsx(r.z,{onClick:()=>v(!1),variant:"ghost",size:"icon",className:"hover:bg-primary-50 hover:text-primary-500",children:s.jsx(d.Z,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"lg:bg-white lg:rounded-2xl lg:p-8 lg:shadow-lg lg:border lg:border-secondary-100 premium-shadow",children:s.jsx(()=>(0,s.jsxs)("div",{className:"space-y-10",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-heading text-lg font-semibold mb-5 text-charcoal-800 border-b border-secondary-100 pb-2",children:"Цена"}),(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx(c.i,{value:m.priceRange,onValueChange:e=>y(l=>({...l,priceRange:e})),max:15e3,step:100,className:"w-full"}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium bg-secondary-50 px-3 py-1 rounded-full text-charcoal-700",children:k(m.priceRange[0])}),s.jsx("span",{className:"text-sm font-medium bg-secondary-50 px-3 py-1 rounded-full text-charcoal-700",children:k(m.priceRange[1])})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-heading text-lg font-semibold mb-5 text-charcoal-800 border-b border-secondary-100 pb-2",children:"Категории"}),s.jsx("div",{className:"space-y-4",children:g.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx(i.X,{id:e.id,checked:m.selectedCategories.includes(e.id),onCheckedChange:l=>f(e.id,l),className:"text-primary-500 border-secondary-200 focus:ring-primary-300"}),(0,s.jsxs)("label",{htmlFor:e.id,className:"flex-1 text-sm cursor-pointer hover:text-primary-500 transition-colors font-medium text-charcoal-700",children:[e.name,(0,s.jsxs)("span",{className:"text-charcoal-400 ml-1",children:["(",e.count,")"]})]})]},e.id))})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-heading text-lg font-semibold mb-5 text-charcoal-800 border-b border-secondary-100 pb-2",children:"Страна производитель"}),s.jsx("div",{className:"space-y-4",children:x.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx(i.X,{id:e.id||"",checked:!!e.id&&m.selectedCountries.includes(e.id),onCheckedChange:l=>e.id&&N(e.id,l),className:"text-primary-500 border-secondary-200 focus:ring-primary-300"}),(0,s.jsxs)("label",{htmlFor:e.id||"",className:"flex-1 text-sm cursor-pointer font-medium text-charcoal-700",children:[e.name,(0,s.jsxs)("span",{className:"text-charcoal-400 ml-1",children:["(",e.count,")"]})]})]},e.id))})]}),h.map(A),s.jsx(r.z,{onClick:j,variant:"outline",className:"w-full border-2 border-secondary-200 hover:border-primary-300 hover:text-primary-600 font-medium",children:"Очистить фильтры"})]}),{})})]})]})}}};