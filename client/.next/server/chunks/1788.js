exports.id=1788,exports.ids=[1788],exports.modules={3985:(t,r,e)=>{Promise.resolve().then(e.bind(e,4034)),Promise.resolve().then(e.bind(e,4423)),Promise.resolve().then(e.bind(e,1741))},4557:(t,r,e)=>{Promise.resolve().then(e.t.bind(e,9918,23)),Promise.resolve().then(e.t.bind(e,2057,23)),Promise.resolve().then(e.t.bind(e,6148,23)),Promise.resolve().then(e.t.bind(e,8359,23)),Promise.resolve().then(e.t.bind(e,1860,23)),Promise.resolve().then(e.t.bind(e,2427,23))},4034:(t,r,e)=>{"use strict";e.r(r),e.d(r,{ClientProviders:()=>y});var a=e(80),s=e(9885),o=e(4163),n=e(644),i=e(8384);class l extends s.Component{static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Uncaught error:",t,r)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:a.jsx(o.Z,{className:"h-6 w-6 text-red-600"})}),a.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Что-то пошло не так"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Произошла непредвиденная ошибка. Пожалуйста, попробуйте обновить страницу."}),!1,(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,a.jsxs)(i.z,{onClick:this.handleReset,className:"flex items-center",children:[a.jsx(n.Z,{className:"h-4 w-4 mr-2"}),"Попробовать снова"]}),a.jsx(i.z,{variant:"outline",onClick:()=>window.location.href="/",children:"На главную"})]})]})}):this.props.children}constructor(...t){super(...t),this.state={hasError:!1,error:null},this.handleReset=()=>{this.setState({hasError:!1,error:null})}}}var c=e(1157),m=e(442),d=e(1072),f=e(9941);let p=({...t})=>{let{theme:r="system"}=(0,d.useTheme)();return a.jsx(f.x7,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function y({children:t}){return a.jsx(l,{children:a.jsx(c.AnimationProvider,{children:(0,a.jsxs)(m.Z,{children:[t,a.jsx(p,{})]})})})}},442:(t,r,e)=>{"use strict";e.d(r,{Z:()=>l,j:()=>i});var a=e(80),s=e(9885),o=e(7936);let n=(0,s.createContext)(void 0),i=()=>{let t=(0,s.useContext)(n);if(!t)throw Error("useCart must be used within a CartProvider");return t},l=({children:t})=>{let[r,e]=(0,s.useState)([]),[i,l]=(0,s.useState)(!0),[c,m]=(0,s.useState)(null),[d,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let t=async()=>{try{let t=await o.h.auth.getProfile().catch(()=>null);f(!!t)}catch(t){f(!1)}};t()},[]),(0,s.useEffect)(()=>{let t=async()=>{try{if(l(!0),d){let t=await o.h.cart.get();e(t.items.map(p))}else{let t=localStorage.getItem("cart");if(t){let r=JSON.parse(t);e(r)}}m(null)}catch(t){if(d)m("Не удалось загрузить корзину"),console.error("Error loading cart:",t);else{let r=localStorage.getItem("cart");if(r){let t=JSON.parse(r);e(t),m(null)}else m("Не удалось загрузить корзину"),console.error("Error loading cart:",t)}}finally{l(!1)}};t()},[d]);let p=t=>({...t,_id:t.product._id}),y=t=>{localStorage.setItem("cart",JSON.stringify(t))},u=async()=>{try{if(l(!0),d){let t=await o.h.cart.get();e(t.items.map(p))}else{let t=localStorage.getItem("cart");if(t){let r=JSON.parse(t);e(r)}}m(null)}catch(t){m("Ошибка синхронизации корзины"),console.error("Cart sync error:",t)}finally{l(!1)}},x=async(t,a=1,s,n)=>{try{if(console.log("addItem called with:",{productId:t._id,quantity:a,size:s,color:n}),console.log("Current items before adding:",r),d)await o.h.cart.add(t._id,a,s,n),await u();else{let o;let i={_id:t._id,product:{...t,category:t.category||(t.categoryId?{_id:t.categoryId._id,name:t.categoryId.name,slug:t.categoryId.slug,isActive:!0,sortOrder:1,level:1}:void 0)},quantity:a,size:s,color:n},l=r.findIndex(r=>r._id===t._id&&r.size===s&&r.color===n);console.log("Existing item index:",l),l>=0?(o=[...r],o[l].quantity+=a,console.log("Updated existing item quantity:",o[l].quantity)):(o=[...r,i],console.log("Added new item to cart")),console.log("Updated items after adding:",o),e(o),y(o)}}catch(t){m("Не удалось добавить товар в корзину"),console.error("Add to cart error:",t)}},g=async(t,a,s)=>{try{if(d)await o.h.cart.remove(t,a,s),await u();else{let o=r.filter(r=>!(r._id===t&&r.size===a&&r.color===s));e(o),y(o)}}catch(t){m("Не удалось удалить товар из корзины"),console.error("Remove from cart error:",t)}},h=async(t,a,s,n)=>{try{if(d)await o.h.cart.update(t,a,s,n),await u();else{let o=r.map(r=>r._id===t&&r.size===s&&r.color===n?{...r,quantity:a}:r);e(o),y(o)}}catch(t){m("Не удалось обновить количество товара"),console.error("Update quantity error:",t)}},b=async()=>{try{d?(await o.h.cart.clear(),await u()):(e([]),localStorage.removeItem("cart"))}catch(t){m("Не удалось очистить корзину"),console.error("Clear cart error:",t)}},w=r.length,k=r.reduce((t,r)=>t+r.quantity,0),v=r.reduce((t,r)=>t+r.product.price*r.quantity,0);return a.jsx(n.Provider,{value:{items:r,totalItems:w,totalQuantity:k,totalPrice:v,loading:i,error:c,addItem:x,removeItem:g,updateQuantity:h,clearCart:b,isInCart:(t,e,a)=>{console.log("isInCart called with:",{productId:t,size:e,color:a}),console.log("Current cart items:",r);let s=r.some(r=>r._id===t&&r.size===e&&r.color===a);return console.log("isInCart result:",s),s},getCartItem:(t,e,a)=>r.find(r=>r._id===t&&r.size===e&&r.color===a)},children:t})}},1157:(t,r,e)=>{"use strict";e.r(r),e.d(r,{AnimationProvider:()=>f,AnimationStyles:()=>d,BounceIn:()=>c,FadeIn:()=>n,Pulse:()=>m,ScaleIn:()=>l,SlideIn:()=>i});var a=e(80),s=e(4405),o=e.n(s);e(9885);let n=({children:t,duration:r=300,delay:e=0,className:s=""})=>a.jsx("div",{className:s,style:{animation:`fadeIn ${r}ms ease-in-out ${e}ms forwards`,opacity:0},children:t}),i=({children:t,direction:r="up",duration:e=300,delay:s=0,className:o=""})=>a.jsx("div",{className:o,style:{animation:`${(()=>{switch(r){case"left":return"slideInLeft";case"right":return"slideInRight";case"down":return"slideInDown";default:return"slideInUp"}})()} ${e}ms ease-out ${s}ms forwards`,opacity:0},children:t}),l=({children:t,duration:r=300,delay:e=0,className:s=""})=>a.jsx("div",{className:s,style:{animation:`scaleIn ${r}ms ease-out ${e}ms forwards`,opacity:0},children:t}),c=({children:t,duration:r=600,delay:e=0,className:s=""})=>a.jsx("div",{className:s,style:{animation:`bounceIn ${r}ms ease-out ${e}ms forwards`,opacity:0},children:t}),m=({children:t,duration:r=1e3,infinite:e=!1,className:s=""})=>a.jsx("div",{className:s,style:{animation:`pulse ${r}ms ease-in-out ${e?"infinite":"forwards"}`},children:t}),d=()=>a.jsx(o(),{id:"22e247735b8601bc",children:"@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-moz-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-o-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes slideInUp{from{-webkit-transform:translatey(20px);transform:translatey(20px);opacity:0}to{-webkit-transform:translatey(0);transform:translatey(0);opacity:1}}@-moz-keyframes slideInUp{from{-moz-transform:translatey(20px);transform:translatey(20px);opacity:0}to{-moz-transform:translatey(0);transform:translatey(0);opacity:1}}@-o-keyframes slideInUp{from{-o-transform:translatey(20px);transform:translatey(20px);opacity:0}to{-o-transform:translatey(0);transform:translatey(0);opacity:1}}@keyframes slideInUp{from{-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px);opacity:0}to{-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0);opacity:1}}@-webkit-keyframes slideInDown{from{-webkit-transform:translatey(-20px);transform:translatey(-20px);opacity:0}to{-webkit-transform:translatey(0);transform:translatey(0);opacity:1}}@-moz-keyframes slideInDown{from{-moz-transform:translatey(-20px);transform:translatey(-20px);opacity:0}to{-moz-transform:translatey(0);transform:translatey(0);opacity:1}}@-o-keyframes slideInDown{from{-o-transform:translatey(-20px);transform:translatey(-20px);opacity:0}to{-o-transform:translatey(0);transform:translatey(0);opacity:1}}@keyframes slideInDown{from{-webkit-transform:translatey(-20px);-moz-transform:translatey(-20px);-o-transform:translatey(-20px);transform:translatey(-20px);opacity:0}to{-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0);opacity:1}}@-webkit-keyframes slideInLeft{from{-webkit-transform:translatex(-20px);transform:translatex(-20px);opacity:0}to{-webkit-transform:translatex(0);transform:translatex(0);opacity:1}}@-moz-keyframes slideInLeft{from{-moz-transform:translatex(-20px);transform:translatex(-20px);opacity:0}to{-moz-transform:translatex(0);transform:translatex(0);opacity:1}}@-o-keyframes slideInLeft{from{-o-transform:translatex(-20px);transform:translatex(-20px);opacity:0}to{-o-transform:translatex(0);transform:translatex(0);opacity:1}}@keyframes slideInLeft{from{-webkit-transform:translatex(-20px);-moz-transform:translatex(-20px);-o-transform:translatex(-20px);transform:translatex(-20px);opacity:0}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0);opacity:1}}@-webkit-keyframes slideInRight{from{-webkit-transform:translatex(20px);transform:translatex(20px);opacity:0}to{-webkit-transform:translatex(0);transform:translatex(0);opacity:1}}@-moz-keyframes slideInRight{from{-moz-transform:translatex(20px);transform:translatex(20px);opacity:0}to{-moz-transform:translatex(0);transform:translatex(0);opacity:1}}@-o-keyframes slideInRight{from{-o-transform:translatex(20px);transform:translatex(20px);opacity:0}to{-o-transform:translatex(0);transform:translatex(0);opacity:1}}@keyframes slideInRight{from{-webkit-transform:translatex(20px);-moz-transform:translatex(20px);-o-transform:translatex(20px);transform:translatex(20px);opacity:0}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0);opacity:1}}@-webkit-keyframes scaleIn{from{-webkit-transform:scale(.9);transform:scale(.9);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:1}}@-moz-keyframes scaleIn{from{-moz-transform:scale(.9);transform:scale(.9);opacity:0}to{-moz-transform:scale(1);transform:scale(1);opacity:1}}@-o-keyframes scaleIn{from{-o-transform:scale(.9);transform:scale(.9);opacity:0}to{-o-transform:scale(1);transform:scale(1);opacity:1}}@keyframes scaleIn{from{-webkit-transform:scale(.9);-moz-transform:scale(.9);-o-transform:scale(.9);transform:scale(.9);opacity:0}to{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1);opacity:1}}@-webkit-keyframes bounceIn{0%{opacity:0;-webkit-transform:scale(.3);transform:scale(.3)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(.9);transform:scale(.9)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@-moz-keyframes bounceIn{0%{opacity:0;-moz-transform:scale(.3);transform:scale(.3)}50%{opacity:1;-moz-transform:scale(1.05);transform:scale(1.05)}70%{-moz-transform:scale(.9);transform:scale(.9)}100%{opacity:1;-moz-transform:scale(1);transform:scale(1)}}@-o-keyframes bounceIn{0%{opacity:0;-o-transform:scale(.3);transform:scale(.3)}50%{opacity:1;-o-transform:scale(1.05);transform:scale(1.05)}70%{-o-transform:scale(.9);transform:scale(.9)}100%{opacity:1;-o-transform:scale(1);transform:scale(1)}}@keyframes bounceIn{0%{opacity:0;-webkit-transform:scale(.3);-moz-transform:scale(.3);-o-transform:scale(.3);transform:scale(.3)}50%{opacity:1;-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(.9);-moz-transform:scale(.9);-o-transform:scale(.9);transform:scale(.9)}100%{opacity:1;-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}@-webkit-keyframes pulse{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(1);transform:scale(1)}}@-moz-keyframes pulse{0%{-moz-transform:scale(1);transform:scale(1)}50%{-moz-transform:scale(1.05);transform:scale(1.05)}100%{-moz-transform:scale(1);transform:scale(1)}}@-o-keyframes pulse{0%{-o-transform:scale(1);transform:scale(1)}50%{-o-transform:scale(1.05);transform:scale(1.05)}100%{-o-transform:scale(1);transform:scale(1)}}@keyframes pulse{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}@-webkit-keyframes shake{0%,100%{-webkit-transform:translatex(0);transform:translatex(0)}10%,30%,50%,70%,90%{-webkit-transform:translatex(-5px);transform:translatex(-5px)}20%,40%,60%,80%{-webkit-transform:translatex(5px);transform:translatex(5px)}}@-moz-keyframes shake{0%,100%{-moz-transform:translatex(0);transform:translatex(0)}10%,30%,50%,70%,90%{-moz-transform:translatex(-5px);transform:translatex(-5px)}20%,40%,60%,80%{-moz-transform:translatex(5px);transform:translatex(5px)}}@-o-keyframes shake{0%,100%{-o-transform:translatex(0);transform:translatex(0)}10%,30%,50%,70%,90%{-o-transform:translatex(-5px);transform:translatex(-5px)}20%,40%,60%,80%{-o-transform:translatex(5px);transform:translatex(5px)}}@keyframes shake{0%,100%{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}10%,30%,50%,70%,90%{-webkit-transform:translatex(-5px);-moz-transform:translatex(-5px);-o-transform:translatex(-5px);transform:translatex(-5px)}20%,40%,60%,80%{-webkit-transform:translatex(5px);-moz-transform:translatex(5px);-o-transform:translatex(5px);transform:translatex(5px)}}.shake{-webkit-animation:shake.5s ease-in-out;-moz-animation:shake.5s ease-in-out;-o-animation:shake.5s ease-in-out;animation:shake.5s ease-in-out}@-webkit-keyframes spin{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.spin{-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite}"}),f=({children:t})=>(0,a.jsxs)(a.Fragment,{children:[a.jsx(d,{}),t]})},4423:(t,r,e)=>{"use strict";e.r(r),e.d(r,{default:()=>c});var a=e(80),s=e(5718),o=e(6200),n=e(9885),i=e(7114);let l=()=>{let[t,r]=(0,n.useState)(!1),e=(0,i.usePathname)(),a=(0,i.useSearchParams)(),s=(0,n.useRef)(!0),o=(0,n.useRef)(null),l=(0,n.useRef)(!0);return(0,n.useEffect)(()=>{},[]),(0,n.useEffect)(()=>{if(!l.current&&s.current)return o.current&&clearTimeout(o.current),r(!0),o.current=setTimeout(()=>{s.current&&r(!1)},300),()=>{o.current&&clearTimeout(o.current)}},[e,a]),t},c=()=>{let t=l();return a.jsx(s.M,{mode:"wait",children:t&&a.jsx(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-cream-50 to-white",children:(0,a.jsxs)("div",{className:"relative w-32 h-32",children:[(0,a.jsxs)("div",{className:"absolute inset-0 rounded-full overflow-hidden bg-gradient-to-br from-primary/20 to-indigo-700/20 backdrop-blur-sm border border-primary/30 shadow-xl",children:[a.jsx(o.E.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:.8,repeat:1/0,repeatType:"loop",ease:"easeInOut"},style:{transform:"skewX(-20deg)"}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(o.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3,ease:"easeOut"},className:"text-primary",children:(0,a.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx(o.E.path,{d:"M40 10C23.4315 10 10 23.4315 10 40C10 56.5685 23.4315 70 40 70C56.5685 70 70 56.5685 70 40C70 23.4315 56.5685 10 40 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.8,ease:"easeInOut"}}),a.jsx(o.E.path,{d:"M40 20V40L50 50",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.8,ease:"easeInOut",delay:.2}})]})})}),a.jsx(o.E.div,{className:"absolute inset-2 rounded-full border-2 border-primary/30",initial:{rotate:0},animate:{rotate:360},transition:{duration:1.5,repeat:1/0,repeatType:"loop",ease:"linear"}}),a.jsx(o.E.div,{className:"absolute inset-4 rounded-full bg-primary/10",initial:{scale:.8,opacity:.7},animate:{scale:1.2,opacity:0},transition:{duration:1,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}})]}),a.jsx(o.E.div,{className:"absolute -bottom-6 left-0 right-0 text-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:a.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Загрузка..."})})]})})})}},1741:(t,r,e)=>{"use strict";e.r(r),e.d(r,{default:()=>i});var a=e(80),s=e(5718),o=e(6200),n=e(7114);let i=({children:t})=>{let r=(0,n.usePathname)();return a.jsx(s.M,{mode:"wait",children:a.jsx(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:[.4,0,.2,1]},className:"min-h-screen",children:t},r)})}},8384:(t,r,e)=>{"use strict";e.d(r,{z:()=>c});var a=e(80),s=e(9885),o=e(1085),n=e(7389),i=e(3161);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef(({className:t,variant:r,size:e,asChild:s=!1,...n},c)=>{let m=s?o.g7:"button";return a.jsx(m,{className:(0,i.cn)(l({variant:r,size:e,className:t})),ref:c,...n})});c.displayName="Button"},7936:(t,r,e)=>{"use strict";e.d(r,{h:()=>o});let a="http://localhost:5001/api";async function s(t,r){let e=0;for(console.log(`API Request: ${a}${t}`);e<=3;)try{let s=await fetch(`${a}${t}`,{...r,headers:{"Content-Type":"application/json",...r?.headers},credentials:"include"});if(console.log(`API Response status: ${s.status} for ${t}`),429===s.status){if(++e>3)throw Error("Too many requests. Please try again later.");let t=1e3*Math.pow(2,e);await new Promise(r=>setTimeout(r,t));continue}if(!s.ok){let t=await s.json();throw console.error("API Error:",t),Error(t.message||"API request failed")}let o=await s.json();return console.log(`✅ API Response data for ${t}:`,o),t.includes("/products")&&!o?.success&&console.warn("⚠️ Products API response:",o),o}catch(r){if(console.error(`API Request failed for ${t}:`,r),r instanceof TypeError&&e<3){e++;let t=1e3*Math.pow(2,e);await new Promise(r=>setTimeout(r,t));continue}throw r}throw Error("Maximum retry attempts reached")}let o={products:{getAll:async t=>{let r=new URLSearchParams;t&&Object.entries(t).forEach(([t,e])=>{void 0!==e&&r.append(t,e.toString())});let e=r.toString(),a=`/products${e?`?${e}`:""}`;console.log("Fetching products from:",a);let o=await s(a);return(console.log("Products API response:",o),o&&!0===o.success&&o.data&&o.data.products&&Array.isArray(o.data.products))?(console.log("✅ Using server format: success.data.products"),console.log("\uD83D\uDCE6 Products count:",o.data.products.length),console.log("\uD83D\uDCE6 First product name:",o.data.products[0]?.name||"none"),{data:o.data.products,summary:{total:o.data.pagination?.total||o.data.products.length,page:o.data.pagination?.page||1,pages:o.data.pagination?.pages||1}}):o&&o.products&&Array.isArray(o.products)?(console.log("Using direct products format"),{data:o.products,summary:o.pagination||{total:o.products.length,page:1,pages:1}}):Array.isArray(o)?(console.log("Using direct array format"),{data:o,summary:{total:o.length,page:1,pages:1}}):o&&o.data&&Array.isArray(o.data)?(console.log("Using direct data array format"),{data:o.data,summary:{total:o.data.length,page:1,pages:1}}):(console.error("Unexpected API response format:",o),{data:[],summary:{total:0,page:1,pages:1}})},getById:async t=>s(`/products/${t}`),getBySlug:async t=>s(`/products/${t}`),getByCategory:async t=>{let r=await s(`/products?category=${t}`);return(console.log("Products by category API response:",r),r&&!0===r.success&&r.data&&r.data.products&&Array.isArray(r.data.products))?(console.log("✅ Using server format: success.data.products"),r.data.products):(console.error("❌ Unexpected API response format:",r),[])},getPopular:async(t=6)=>s(`/products?isFeatured=true&limit=${t}`),getNew:async(t=6)=>s(`/products?isBrandNew=true&limit=${t}`),getOnSale:async(t=6)=>s(`/products?isOnSale=true&limit=${t}`),search:async t=>{let r=await s(`/products?search=${encodeURIComponent(t)}`);return(console.log("Search API response:",r),r&&!0===r.success&&r.data&&r.data.products&&Array.isArray(r.data.products))?(console.log("✅ Using server format: success.data.products"),r.data.products):(console.error("❌ Unexpected API response format:",r),[])}},cart:{get:async()=>s("/cart"),add:async(t,r=1,e,a)=>s("/cart/add",{method:"POST",body:JSON.stringify({productId:t,quantity:r,size:e,color:a})}),update:async(t,r,e,a)=>s(`/cart/${t}`,{method:"PUT",body:JSON.stringify({quantity:r,size:e,color:a})}),remove:async(t,r,e)=>s(`/cart/${t}`,{method:"DELETE",body:JSON.stringify({size:r,color:e})}),clear:async()=>s("/cart",{method:"DELETE"})},favorites:{get:async()=>s("/favorites"),add:async t=>s("/favorites",{method:"POST",body:JSON.stringify({productId:t})}),remove:async t=>s(`/favorites/${t}`,{method:"DELETE"}),check:async t=>s(`/favorites/check/${t}`)},auth:{register:async(t,r,e,a)=>s("/auth/register",{method:"POST",body:JSON.stringify({firstName:t,lastName:r,email:e,password:a})}),login:async(t,r)=>s("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:r})}),logout:async()=>s("/auth/logout",{method:"POST"}),getProfile:async()=>s("/auth/profile"),updateProfile:async(t,r,e)=>s("/auth/profile",{method:"PUT",body:JSON.stringify({firstName:t,lastName:r,email:e})}),changePassword:async(t,r)=>s("/auth/change-password",{method:"POST",body:JSON.stringify({currentPassword:t,newPassword:r})}),forgotPassword:async t=>s("/auth/forgot-password",{method:"POST",body:JSON.stringify({email:t})}),resetPassword:async(t,r)=>s("/auth/reset-password",{method:"POST",body:JSON.stringify({token:t,password:r})})},categories:{getAll:async()=>{let t=await s("/categories");return t.success&&t.data&&t.data.categories?t.data.categories:Array.isArray(t)?t:[]},getBySlug:async t=>{let r=await s(`/categories/${t}`);return r.success&&r.data&&r.data.category?r.data.category:r}},orders:{create:async(t,r)=>s("/orders",{method:"POST",body:JSON.stringify({items:t,shippingAddress:r})}),getUserOrders:async()=>s("/orders"),getOrderById:async t=>s(`/orders/${t}`)}}},3161:(t,r,e)=>{"use strict";e.d(r,{cn:()=>o});var a=e(566),s=e(8126);function o(...t){return(0,s.m6)((0,a.W)(t))}},7613:(t,r,e)=>{"use strict";e.r(r),e.d(r,{default:()=>z,metadata:()=>I});var a=e(8144),s=e(8798),o=e.n(s),n=e(8393),i=e.n(n),l=e(6664),c=e.n(l);e(7272);var m=e(7536);let d=(0,m.createProxy)(String.raw`/Users/mikhailkolotushin/KolTech/projects/dvb/client/components/ClientProviders.tsx`),{__esModule:f,$$typeof:p}=d;d.default;let y=d.ClientProviders,u=(0,m.createProxy)(String.raw`/Users/mikhailkolotushin/KolTech/projects/dvb/client/components/ui/PageTransitionLoader.tsx`),{__esModule:x,$$typeof:g}=u,h=u.default,b=(0,m.createProxy)(String.raw`/Users/mikhailkolotushin/KolTech/projects/dvb/client/components/ui/SmoothTransition.tsx`),{__esModule:w,$$typeof:k}=b,v=b.default,I={title:"DV BERRY - Стильные очки и модная одежда",description:"Эксклюзивные солнцезащитные очки из Китая и качественная одежда из Европы. Оригинальность, стиль и качество."};function z({children:t}){return a.jsx("html",{lang:"ru",children:a.jsx("body",{className:`${o().variable} ${i().variable} ${c().variable} font-sans`,children:(0,a.jsxs)(y,{children:[a.jsx(v,{children:t}),a.jsx(h,{})]})})})}},7272:()=>{}};