(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{8291:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},4891:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},9883:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6712:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},4342:function(e,s,a){Promise.resolve().then(a.bind(a,5736))},5736:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return k}});var t=a(7437),r=a(2265),l=a(1088),n=a(1517),c=a(3023),i=a(6110),d=a(1908),o=a(6775),x=a(9155),u=a(2609),m=a(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,m.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var f=a(6712),v=a(4891),g=a(9883),j=a(8291),p=a(8554),y=a(1424),N=a(1396),b=a.n(N),w=a(8188),C=a(1945),k=()=>{let{items:e,totalItems:s,totalQuantity:a,totalPrice:m,loading:N,error:k,removeItem:z,updateQuantity:F,clearCart:Z}=(0,p.j)(),[A,R]=(0,r.useState)(""),[M,S]=(0,r.useState)(0),[E,_]=(0,r.useState)(!1),[O,q]=(0,r.useState)(!1),B=async(e,s,a,t)=>{s<1?await z(e,a,t):await F(e,s,a,t)},I=async(e,s,a)=>{await z(e,s,a),y.Am.success("Товар удален из корзины",{style:{color:"#1f2937",background:"#ffffff",border:"1px solid #e5e7eb"}})},V=async()=>{await Z(),y.Am.success("Корзина очищена",{style:{color:"#1f2937",background:"#ffffff",border:"1px solid #e5e7eb"}}),q(!1)},H=async()=>{if(0===e.length){y.Am.error("Корзина пуста");return}_(!0);try{window.location.href="/checkout"}catch(e){y.Am.error("Не удалось перейти к оформлению заказа"),_(!1)}},D=e=>new Intl.NumberFormat("ru-RU").format(e)+" ₽",L=m*(1-M/100),T=L>5e3?0:300,Y=L+T;return N?(0,t.jsx)("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Загрузка корзины..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-cream-50",children:[(0,t.jsx)(l.default,{}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"font-display text-3xl lg:text-4xl font-bold text-gray-900 mb-2",children:"Корзина"}),(0,t.jsx)("p",{className:"text-lg text-gray-600",children:s>0?"В корзине ".concat(s," ").concat(1===s?"товар":s<5?"товара":"товаров"):"Ваша корзина пуста"})]}),k&&(0,t.jsx)("div",{className:"mb-8 p-4 bg-red-50 text-red-700 rounded-lg",children:k}),e.length>0?(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)(i.ll,{className:"flex items-center justify-between text-gray-900",children:[(0,t.jsx)("span",{children:"Товары в корзине"}),(0,t.jsxs)(u.Vq,{open:O,onOpenChange:q,children:[(0,t.jsx)(u.hg,{asChild:!0,children:(0,t.jsxs)(c.z,{variant:"outline",size:"sm",className:"text-red-500 hover:bg-transparent hover:text-red-600 border-transparent",children:[(0,t.jsx)(h,{className:"w-4 h-4 mr-2"}),"Очистить корзину"]})}),(0,t.jsxs)(u.cZ,{className:"sm:max-w-md",children:[(0,t.jsxs)(u.fK,{children:[(0,t.jsx)(u.$N,{className:"text-gray-900",children:"Подтверждение очистки корзины"}),(0,t.jsx)(u.Be,{className:"text-gray-700",children:"Вы уверены, что хотите очистить корзину? Все товары будут удалены."})]}),(0,t.jsxs)(u.cN,{children:[(0,t.jsx)(c.z,{variant:"outline",onClick:()=>q(!1),className:"hover:bg-transparent hover:text-gray-900",children:"Отмена"}),(0,t.jsx)(c.z,{onClick:V,className:"bg-red-500 hover:bg-red-600",children:"Очистить корзину"})]})]})]})]})}),(0,t.jsx)(i.aY,{className:"space-y-6",children:e.map(e=>{var s;return(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pb-6 border-b border-gray-200",children:[(0,t.jsx)("div",{className:"w-full sm:w-32 h-32 bg-gray-100 rounded-md overflow-hidden",children:e.product.mainImage?(0,t.jsx)(C.w,{src:e.product.mainImage,alt:e.product.name,className:"w-full h-full object-cover"}):e.product.images&&e.product.images.length>0?(0,t.jsx)(C.w,{src:e.product.images[0].url,thumbnailSrc:e.product.images[0].thumbnailUrl,alt:e.product.name,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:(0,t.jsx)(f.Z,{className:"h-8 w-8 text-gray-400"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(b(),{href:"/product/".concat(e.product.slug),className:"font-bold text-lg hover:text-primary transition-colors text-gray-900",children:e.product.name}),e.product.category&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.product.category.name}),(e.size||e.color)&&(0,t.jsxs)("div",{className:"flex gap-2 mt-2 items-center",children:[e.size&&(0,t.jsxs)(x.C,{variant:"secondary",children:["Размер: ",e.size]}),e.color&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Цвет:"}),(0,t.jsx)("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:(null===(s=(0,w.OA)(e.color))||void 0===s?void 0:s.value)||"#CCCCCC",borderColor:"Белый"===e.color?"#E5E7EB":void 0},title:e.color})]})]})]}),(0,t.jsx)(c.z,{variant:"ghost",size:"icon",onClick:()=>I(e._id,e.size,e.color),className:"text-red-500 hover:bg-transparent hover:text-red-600",children:(0,t.jsx)(h,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[(0,t.jsx)(c.z,{variant:"ghost",size:"icon",onClick:()=>B(e._id,e.quantity-1,e.size,e.color),disabled:e.quantity<=1,className:"hover:bg-transparent hover:text-gray-700",children:(0,t.jsx)(v.Z,{className:"w-4 h-4 text-gray-700"})}),(0,t.jsx)("span",{className:"px-4 py-2 text-center min-w-[50px] text-gray-900",children:e.quantity}),(0,t.jsx)(c.z,{variant:"ghost",size:"icon",onClick:()=>B(e._id,e.quantity+1,e.size,e.color),className:"hover:bg-transparent hover:text-gray-700",children:(0,t.jsx)(g.Z,{className:"w-4 h-4 text-gray-700"})})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"font-bold text-lg",children:D(e.product.price*e.quantity)}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[D(e.product.price)," \xd7 ",e.quantity]})]})]})]})]},"".concat(e._id,"-").concat(e.size||"","-").concat(e.color||""))})})]}),(0,t.jsx)("div",{className:"flex justify-center mt-6",children:(0,t.jsx)(b(),{href:"/catalog",children:(0,t.jsxs)(c.z,{variant:"outline",children:[(0,t.jsx)(j.Z,{className:"w-4 h-4 mr-2 rotate-180"}),"Продолжить покупки"]})})})]}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)(i.Zb,{className:"sticky top-8",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-gray-900",children:"Итого"})}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{className:"text-gray-700",children:["Товары (",a," шт.)"]}),(0,t.jsx)("span",{className:"text-gray-900",children:D(m)})]}),M>0&&(0,t.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,t.jsxs)("span",{className:"text-gray-700",children:["Скидка (",M,"%)"]}),(0,t.jsxs)("span",{className:"text-gray-900",children:["-",D(m*M/100)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-700",children:"Доставка"}),(0,t.jsx)("span",{className:"text-gray-900",children:0===T?"Бесплатно":D(T)})]}),(0,t.jsx)(o.Z,{}),(0,t.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[(0,t.jsx)("span",{className:"text-gray-700",children:"Итого к оплате"}),(0,t.jsx)("span",{className:"text-gray-900",children:D(Y)})]}),T>0&&(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Бесплатная доставка при заказе от 5000 ₽"}),(0,t.jsxs)("div",{className:"space-y-2 pt-4",children:[(0,t.jsx)("p",{className:"font-medium",children:"Промокод"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(d.I,{placeholder:"Введите промокод",value:A,onChange:e=>R(e.target.value),className:"bg-gray-50 border-gray-200 focus:bg-white text-gray-900"}),(0,t.jsx)(c.z,{variant:"outline",onClick:()=>{"demo10"===A.toLowerCase()?(S(10),y.Am.success("Промокод применен! Скидка 10%")):"demo20"===A.toLowerCase()?(S(20),y.Am.success("Промокод применен! Скидка 20%")):(S(0),y.Am.error("Неверный промокод"))},children:"Применить"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Попробуйте промокоды: demo10 или demo20"})]}),(0,t.jsxs)(c.z,{onClick:H,className:"w-full mt-6",disabled:E,children:[E?"Обработка...":"Оформить заказ",(0,t.jsx)(j.Z,{className:"w-4 h-4 ml-2"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Нажимая кнопку \xabОформить заказ\xbb, вы соглашаетесь с условиями обработки персональных данных"})]})]})})]}):(0,t.jsxs)("div",{className:"text-center py-16 bg-white rounded-2xl shadow-sm",children:[(0,t.jsx)(f.Z,{className:"mx-auto h-16 w-16 text-gray-400"}),(0,t.jsx)("h3",{className:"mt-4 text-xl font-medium text-gray-900",children:"Ваша корзина пуста"}),(0,t.jsx)("p",{className:"mt-2 text-gray-500 max-w-md mx-auto",children:"Добавьте товары в корзину, чтобы оформить заказ."}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)(b(),{href:"/catalog",children:(0,t.jsx)(c.z,{className:"px-6",children:"Перейти в каталог"})})})]})]}),(0,t.jsx)(n.default,{})]})}},1945:function(e,s,a){"use strict";a.d(s,{w:function(){return n}});var t=a(7437),r=a(2265);let l=e=>{let{className:s="",width:a="100%",height:r="100%"}=e;return(0,t.jsx)("div",{className:"animate-pulse bg-gray-200 rounded-lg ".concat(s),style:{width:a,height:r},children:(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-gray-400",children:(0,t.jsx)("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})})})})},n=e=>{let{src:s,alt:a,thumbnailSrc:n,className:c="",width:i="100%",height:d="100%",onClick:o}=e,[x,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!0),[f,v]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1),p=(0,r.useRef)(null),y=e=>e?e.replace("https://api.dvberry.ru",""):e,N=y(s),b=n?y(n):void 0;(0,r.useEffect)(()=>{let e=new IntersectionObserver(s=>{let[a]=s;a.isIntersecting&&(w(),e.disconnect())},{threshold:.1});return p.current&&e.observe(p.current),()=>{e.disconnect()}},[]);let w=()=>{if(h(!0),v(!1),n&&!g){let e=new Image;e.onload=()=>{u(!0),h(!1),setTimeout(()=>{j(!0)},300)},e.onerror=()=>{v(!0),h(!1)},e.src=b||""}else{let e=new Image;e.onload=()=>{u(!0),h(!1)},e.onerror=()=>{v(!0),h(!1)},e.src=N}};return(0,t.jsxs)("div",{className:"relative overflow-hidden ".concat(c),style:{width:i,height:d},onClick:()=>{o&&o()},children:[m&&(0,t.jsx)(l,{width:i,height:d,className:"absolute inset-0"}),f?(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 rounded-lg",children:(0,t.jsxs)("div",{className:"text-gray-400 text-center",children:[(0,t.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),(0,t.jsx)("p",{className:"text-sm",children:"Ошибка загрузки"})]})}):(0,t.jsx)("img",{ref:p,src:g?N:b||N,alt:a,className:"w-full h-full object-cover transition-opacity duration-300 ".concat(x?"opacity-100":"opacity-0"),style:{width:i,height:d}}),m&&x&&(0,t.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-50 transition-opacity duration-300 opacity-0"})]})}},9155:function(e,s,a){"use strict";a.d(s,{C:function(){return c}});var t=a(7437);a(2265);var r=a(9213),l=a(9311);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)(n({variant:a}),s),...r})}},6110:function(e,s,a){"use strict";a.d(s,{Ol:function(){return c},SZ:function(){return d},Zb:function(){return n},aY:function(){return o},ll:function(){return i}});var t=a(7437),r=a(2265),l=a(9311);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});c.displayName="CardHeader";let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});i.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent";let x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})});x.displayName="CardFooter"},6775:function(e,s,a){"use strict";a.d(s,{Z:function(){return c}});var t=a(7437),r=a(2265),l=a(6823),n=a(9311);let c=r.forwardRef((e,s)=>{let{className:a,orientation:r="horizontal",decorative:c=!0,...i}=e;return(0,t.jsx)(l.f,{ref:s,decorative:c,orientation:r,className:(0,n.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...i})});c.displayName=l.f.displayName},8188:function(e,s,a){"use strict";a.d(s,{OA:function(){return r}});let t=[{name:"Черный",value:"#000000"},{name:"Белый",value:"#FFFFFF"},{name:"Красный",value:"#FF0000"},{name:"Синий",value:"#0000FF"},{name:"Зеленый",value:"#008000"},{name:"Желтый",value:"#FFFF00"},{name:"Оранжевый",value:"#FFA500"},{name:"Фиолетовый",value:"#800080"},{name:"Розовый",value:"#FFC0CB"},{name:"Коричневый",value:"#A52A2A"},{name:"Серый",value:"#808080"},{name:"Бежевый",value:"#F5F5DC"},{name:"Бирюзовый",value:"#40E0D0"},{name:"Лавандовый",value:"#E6E6FA"},{name:"Мятный",value:"#98FB98"},{name:"Коралловый",value:"#FF7F50"},{name:"Индиго",value:"#4B0082"},{name:"Золотой",value:"#FFD700"},{name:"Серебряный",value:"#C0C0C0"},{name:"Бордовый",value:"#800000"}],r=e=>t.find(s=>s.name.toLowerCase()===e.toLowerCase())},6823:function(e,s,a){"use strict";a.d(s,{f:function(){return d}});var t=a(2265),r=a(9381),l=a(7437),n="horizontal",c=["horizontal","vertical"],i=t.forwardRef((e,s)=>{let{decorative:a,orientation:t=n,...i}=e,d=c.includes(t)?t:n;return(0,l.jsx)(r.WV.div,{"data-orientation":d,...a?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...i,ref:s})});i.displayName="Separator";var d=i}},function(e){e.O(0,[312,351,936,548,971,864,560],function(){return e(e.s=4342)}),_N_E=e.O()}]);