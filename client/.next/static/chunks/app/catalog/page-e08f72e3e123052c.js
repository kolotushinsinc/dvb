(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43],{8063:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});var t=a(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5680:function(e,s,a){Promise.resolve().then(a.bind(a,3829))},3829:function(e,s,a){"use strict";a.r(s);var t=a(7437),l=a(2265),r=a(1088),i=a(1517),c=a(3023),n=a(7810),d=a(9670),o=a(5340),x=a(1609),m=a(8850),h=a(1211),u=a(1424),g=a(1396),j=a.n(g),p=a(7960),v=a(9613),y=a(1002),N=a(6036),f=a(3241),w=a(1980),b=a(8239);s.default=()=>{let[e,s]=(0,l.useState)({priceRange:[0,15e3],selectedCategories:[],selectedFilters:{},selectedCountries:[]}),{toggleFavorite:a,isFavorite:g,isLoggedIn:k,showAuthModal:C,setShowAuthModal:A}=(0,x.r)(),{categories:_,loading:z}=(0,m.L)(),{products:Z,loading:E,error:F}=(0,h.r)(),I=(0,h.M)(Z,_,e),P=async(e,s)=>{if(s.preventDefault(),s.stopPropagation(),!k){A(!0);return}try{await a(e._id);let s=g(e._id)?"Товар удален из избранного":"Товар добавлен в избранное";u.Am.success(s)}catch(e){u.Am.error("Не удалось добавить товар в избранное")}},S=e=>new Intl.NumberFormat("ru-RU").format(e)+" ₽";return(0,t.jsxs)("div",{className:"min-h-screen bg-cream-50",children:[(0,t.jsx)(r.default,{}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"font-display text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Каталог товаров"}),(0,t.jsxs)("p",{className:"text-lg text-gray-600",children:["Найдено товаров: ",I&&Array.isArray(I)?I.length:0]})]}),(0,t.jsxs)("div",{className:"flex gap-8",children:[(0,t.jsx)(w.V,{categories:_,products:Z,onFilterChange:e=>s(e)}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:z||E?(0,t.jsx)(v.mA,{count:6}):F?(0,t.jsx)("div",{className:"col-span-full",children:(0,t.jsx)(y.F7,{onRetry:()=>window.location.reload()})}):I&&Array.isArray(I)&&I.length>0?I.map((e,s)=>(0,t.jsx)(p.SlideIn,{delay:50*s,children:(0,t.jsxs)("div",{className:"group bg-white rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative overflow-hidden bg-gray-100 h-64",children:[(0,t.jsx)(j(),{href:"/product/".concat(e.slug),children:(0,t.jsx)(b.d,{src:e.mainImage||"/placeholder-product.jpg",alt:e.name,width:400,height:256,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),(0,t.jsxs)("div",{className:"absolute top-4 left-4 flex flex-col space-y-2",children:[e.isBrandNew&&(0,t.jsx)("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full font-semibold",children:"NEW"}),e.isOnSale&&(0,t.jsx)("span",{className:"bg-accent text-white text-xs px-2 py-1 rounded-full font-semibold",children:"-20%"})]}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col space-y-2 opacity-0 group-hover:opacity-100 transform translate-x-4 group-hover:translate-x-0 transition-all duration-300",children:[(0,t.jsx)(c.z,{size:"icon",variant:"secondary",className:"w-10 h-10 rounded-full bg-white/90 backdrop-blur-sm hover:bg-white shadow-md ".concat(g(e._id)?"text-red-500 hover:text-red-600":"text-gray-600 hover:text-red-500"),onClick:s=>P(e,s),children:(0,t.jsx)(n.Z,{className:"w-4 h-4 ".concat(g(e._id)?"fill-current":"")})}),(0,t.jsx)(f.i,{product:e,children:(0,t.jsx)(c.z,{size:"icon",variant:"secondary",className:"w-10 h-10 rounded-full bg-white/90 backdrop-blur-sm hover:bg-white shadow-md text-gray-600 hover:text-blue-500",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,t.jsx)(d.Z,{className:"w-4 h-4"})})})]}),(0,t.jsx)("div",{className:"absolute bottom-4 left-4",children:(0,t.jsx)("span",{className:"bg-white/90 backdrop-blur-sm text-gray-700 text-xs px-3 py-1 rounded-full font-medium",children:e.country})})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500 uppercase tracking-wide font-medium",children:e.categoryId?e.categoryId.name:e.category?e.category.name:""}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(o.Z,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:e.rating||0}),(0,t.jsxs)("span",{className:"text-sm text-gray-400",children:["(",e.reviewsCount||0,")"]})]})]}),(0,t.jsx)(j(),{href:"/product/".concat(e.slug),children:(0,t.jsx)("h3",{className:"font-heading text-lg font-bold text-gray-900 mb-3 group-hover:text-primary transition-colors",children:e.name})}),(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-xl font-bold text-primary",children:S(e.price)}),e.originalPrice&&(0,t.jsx)("span",{className:"text-sm text-gray-500 line-through",children:S(e.originalPrice)})]})})]})]})},e._id)):(0,t.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,t.jsx)("p",{className:"text-gray-500 text-lg mb-4",children:"Товары не найдены"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Попробуйте изменить параметры фильтрации или обновить страницу"})]})})})]})]}),(0,t.jsx)(N.Q,{isOpen:C,onClose:()=>A(!1),message:"Для добавления товара в избранное необходимо войти в систему"}),(0,t.jsx)(i.default,{})]})}},1002:function(e,s,a){"use strict";a.d(s,{F7:function(){return n},TX:function(){return d},Xr:function(){return c}});var t=a(7437);a(2265);var l=a(8063),r=a(2549),i=a(3023);let c=e=>{let{error:s,onDismiss:a,className:c=""}=e;return s?(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 ".concat(c),children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(l.Z,{className:"h-5 w-5 text-red-400"})}),(0,t.jsxs)("div",{className:"ml-3 flex-1",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Ошибка"}),(0,t.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,t.jsx)("p",{children:s})})]}),a&&(0,t.jsx)("div",{className:"ml-auto pl-3",children:(0,t.jsx)("div",{className:"-mx-1.5 -my-1.5",children:(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:a,className:"text-red-500 hover:text-red-700",children:(0,t.jsx)(r.Z,{className:"h-4 w-4"})})})})]})}):null},n=e=>{let{onRetry:s,className:a=""}=e;return(0,t.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 ".concat(a),children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(l.Z,{className:"h-5 w-5 text-yellow-400"})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Проблема с подключением"}),(0,t.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,t.jsx)("p",{children:"Не удалось подключиться к серверу. Пожалуйста, проверьте ваше интернет-соединение."})}),s&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(i.z,{variant:"outline",size:"sm",onClick:s,className:"text-yellow-700 border-yellow-300 hover:bg-yellow-100",children:"Попробовать снова"})})]})]})})},d=e=>{let{message:s="Страница не найдена",className:a=""}=e;return(0,t.jsx)("div",{className:"min-h-[400px] flex items-center justify-center ".concat(a),children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-6xl font-bold text-gray-900",children:"404"}),(0,t.jsx)("p",{className:"mt-4 text-lg text-gray-600",children:s})]})})}},9613:function(e,s,a){"use strict";a.d(s,{mA:function(){return r},q4:function(){return l}});var t=a(7437);a(2265);let l=e=>{let{count:s=1,className:a=""}=e;return(0,t.jsx)("div",{className:"space-y-4 ".concat(a),children:Array.from({length:s}).map((e,s)=>(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-4 animate-pulse",children:(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("div",{className:"rounded-md bg-gray-200 h-24 w-24"}),(0,t.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]}),(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3"})]})]})},s))})},r=e=>{let{count:s=1,className:a=""}=e;return(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 ".concat(a),children:Array.from({length:s}).map((e,s)=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden animate-pulse",children:[(0,t.jsx)("div",{className:"bg-gray-200 h-48 w-full"}),(0,t.jsxs)("div",{className:"p-4 space-y-3",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3"})]})]},s))})}},8239:function(e,s,a){"use strict";a.d(s,{d:function(){return c}});var t=a(7437),l=a(2265),r=a(6691),i=a.n(r);let c=e=>{let{src:s,alt:a,width:r=400,height:c=300,className:n="",priority:d=!1,placeholder:o="empty",blurDataURL:x}=e,[m,h]=(0,l.useState)(!0),[u,g]=(0,l.useState)(!1),j=s?s.replace("https://api.dvberry.ru",""):s;return(0,t.jsxs)("div",{className:"relative overflow-hidden ".concat(n),children:[m&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-gray-400 text-sm",children:"Загрузка..."})}),u?(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-200 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-gray-400 text-sm",children:"Изображение недоступно"})}):(0,t.jsx)(i(),{src:j,alt:a,width:r,height:c,className:"transition-opacity duration-300 ".concat(m?"opacity-0":"opacity-100"),priority:d,placeholder:o,blurDataURL:x,onLoadingComplete:()=>h(!1),onError:()=>g(!0),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})]})}}},function(e){e.O(0,[312,351,787,10,564,936,548,806,698,971,864,560],function(){return e(e.s=5680)}),_N_E=e.O()}]);