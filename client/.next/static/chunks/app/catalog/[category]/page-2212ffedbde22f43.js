(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[583],{1291:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7158:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},7341:function(e,s,t){Promise.resolve().then(t.bind(t,3947)),Promise.resolve().then(t.bind(t,1517)),Promise.resolve().then(t.bind(t,1088))},3947:function(e,s,t){"use strict";t.r(s);var a=t(7437),r=t(2265),l=t(4033),n=t(3023),i=t(7810),c=t(9670),o=t(5340),d=t(3505),x=t(8554),m=t(1609),h=t(8850),u=t(1211),g=t(1424),p=t(1396),f=t.n(p),j=t(7960),v=t(6036),N=t(3241),y=t(1980),b=t(1945);s.default=function(){let e=(0,l.useParams)(),s=(0,l.useSearchParams)(),t=e.category,p=s.get("search")||"",[w,C]=(0,r.useState)({priceRange:[0,15e3],selectedCategories:[],selectedFilters:{},selectedCountries:[]}),[k,_]=(0,r.useState)(null),{addItem:P}=(0,x.j)(),{toggleFavorite:Z,isFavorite:z,isLoggedIn:L,showAuthModal:S,setShowAuthModal:E}=(0,m.r)(),{categories:I,loading:A}=(0,h.L)(),{products:O,loading:D}=(0,u.r)({category:t}),F=(0,u.M)(O,I,w),R=(0,r.useMemo)(()=>p?F.filter(e=>{var s;return e.name.toLowerCase().includes(p.toLowerCase())||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(p.toLowerCase()))}):F,[F,p]),M=I.find(e=>e.slug===t);(0,r.useEffect)(()=>{I.length>0&&!M?_("Категория не найдена"):M&&!M.isActive&&_("Категория неактивна")},[I,M]);let U=(e,s)=>{s.preventDefault(),s.stopPropagation(),P(e),g.Am.success("Товар добавлен в корзину!")},q=async(e,s)=>{if(s.preventDefault(),s.stopPropagation(),!L){E(!0);return}try{await Z(e._id);let s=z(e._id)?"Товар удален из избранного":"Товар добавлен в избранное";g.Am.success(s)}catch(e){g.Am.error("Не удалось добавить товар в избранное")}},B=e=>new Intl.NumberFormat("ru-RU").format(e)+" ₽";return A||D?(0,a.jsx)("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Загрузка товаров..."}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Категория: ",t]})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-cream-50",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"font-display text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:(e=>{switch(e){case"glasses":return"Очки";case"clothing":return"Одежда";case"shoes":return"Обувь";case"accessories":return"Аксессуары";case"sale":return"Распродажа";case"new":return"Новинки";default:return e}})(t)}),(0,a.jsxs)("p",{className:"text-lg text-gray-600",children:["Найдено товаров: ",R.length,p&&(0,a.jsxs)("span",{className:"ml-2",children:['по запросу "',p,'"']})]})]}),(0,a.jsxs)("div",{className:"flex gap-8",children:[(0,a.jsx)(y.V,{categories:I,products:O,onFilterChange:e=>C(e),initialCategory:null==M?void 0:M._id}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:R.map(e=>(0,a.jsx)(j.SlideIn,{children:(0,a.jsxs)("div",{className:"group bg-white rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative overflow-hidden bg-gray-100 h-64",children:[(0,a.jsx)(b.w,{src:e.mainImage||"/placeholder-product.jpg",thumbnailSrc:e.thumbnailUrl,alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),(0,a.jsxs)("div",{className:"absolute top-4 left-4 flex flex-col space-y-2",children:[e.isBrandNew&&(0,a.jsx)("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full font-semibold",children:"NEW"}),e.isOnSale&&(0,a.jsx)("span",{className:"bg-accent text-white text-xs px-2 py-1 rounded-full font-semibold",children:"-20%"})]}),(0,a.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col space-y-2 opacity-0 group-hover:opacity-100 transform translate-x-4 group-hover:translate-x-0 transition-all duration-300",children:[(0,a.jsx)(n.z,{size:"icon",variant:"secondary",className:"w-10 h-10 rounded-full bg-white/90 backdrop-blur-sm hover:bg-white shadow-md ".concat(z(e._id)?"text-red-500 hover:text-red-600":"text-gray-600 hover:text-red-500"),onClick:s=>q(e,s),children:(0,a.jsx)(i.Z,{className:"w-4 h-4 ".concat(z(e._id)?"fill-current":"")})}),(0,a.jsx)(N.i,{product:e,children:(0,a.jsx)(n.z,{size:"icon",variant:"secondary",className:"w-10 h-10 rounded-full bg-white/90 backdrop-blur-sm hover:bg-white shadow-md text-gray-600 hover:text-blue-500",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,a.jsx)(c.Z,{className:"w-4 h-4"})})})]}),(0,a.jsx)("div",{className:"absolute bottom-4 left-4",children:(0,a.jsx)("span",{className:"bg-white/90 backdrop-blur-sm text-gray-700 text-xs px-3 py-1 rounded-full font-medium",children:e.country})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 uppercase tracking-wide font-medium",children:e.categoryId?e.categoryId.name:e.category?e.category.name:""}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.rating||0}),(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:["(",e.reviewsCount||0,")"]})]})]}),(0,a.jsx)(f(),{href:"/product/".concat(e.slug),children:(0,a.jsx)("h3",{className:"font-heading text-lg font-bold text-gray-900 mb-3 group-hover:text-primary transition-colors cursor-pointer",children:e.name})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xl font-bold text-primary",children:B(e.price)}),e.originalPrice&&(0,a.jsx)("span",{className:"text-sm text-gray-500 line-through",children:B(e.originalPrice)})]}),(0,a.jsx)(n.z,{size:"icon",className:"rounded-full bg-primary hover:bg-indigo-700",onClick:s=>U(e,s),children:(0,a.jsx)(d.Z,{className:"w-4 h-4"})})]})]})]})},e._id))}),0===R.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-gray-500 text-lg mb-4",children:"По вашим критериям ничего не найдено"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Попробуйте изменить параметры фильтрации"})]})]})]})]}),(0,a.jsx)(v.Q,{isOpen:S,onClose:()=>E(!1),message:"Для добавления товара в избранное необходимо войти в систему"})]})}}},function(e){e.O(0,[312,351,787,10,936,548,806,698,971,864,560],function(){return e(e.s=7341)}),_N_E=e.O()}]);