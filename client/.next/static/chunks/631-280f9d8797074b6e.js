"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{7517:function(e,a,t){t.d(a,{c:function(){return o}});var r=t(7437),s=t(8188);let o=e=>{let{colors:a,selectedColor:t,onColorChange:o,compact:n=!1}=e;return(0,r.jsxs)("div",{children:[!n&&(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Цвет"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.from(new Set(a)).map(e=>{let a=(0,s.OA)(e),l=t===e;return(0,r.jsx)("button",{className:"".concat(n?"w-7 h-7":"w-8 h-8"," rounded-full border-2 transition-all duration-200 hover:scale-110 ").concat(l?"border-primary-500 ring-2 ring-offset-2 ring-primary-200":"border-secondary-200 hover:border-primary-300"),style:{backgroundColor:(null==a?void 0:a.value)||"#CCCCCC",borderColor:"Белый"===e?"#E5E7EB":void 0},onClick:()=>o(e),title:e,"aria-label":"Выбрать цвет ".concat(e)},e)})}),t&&!n&&(0,r.jsxs)("p",{className:"text-sm text-charcoal-600 mt-2",children:["Выбран: ",t]})]})}},3241:function(e,a,t){t.d(a,{i:function(){return E}});var r=t(7437),s=t(2265),o=t(1396),n=t.n(o),l=t(1291),i=t(7158),c=t(5340),m=t(4891),f=t(9883),d=t(3505),x=t(7810),p=t(2609),u=t(3023),h=t(7517),y=t(6036),g=t(8554),b=t(1609);let w=0,v=new Map,k=e=>{if(v.has(e))return;let a=setTimeout(()=>{v.delete(e),I({type:"REMOVE_TOAST",toastId:e})},1e6);v.set(e,a)},j=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?k(t):e.toasts.forEach(e=>{k(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},N=[],z={toasts:[]};function I(e){z=j(z,e),N.forEach(e=>{e(z)})}function S(e){let{...a}=e,t=(w=(w+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>I({type:"DISMISS_TOAST",toastId:t});return I({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>I({type:"UPDATE_TOAST",toast:{...e,id:t}})}}var C=t(9311),F=t(1945),A=t(164);function E(e){var a;let{product:t,className:o,children:w}=e,[v,k]=(0,s.useState)(!1),[j,E]=(0,s.useState)(null),[T,O]=(0,s.useState)(null),[_,D]=(0,s.useState)(1),[R,L]=(0,s.useState)(!1),[U,P]=(0,s.useState)(0),[B,M]=(0,s.useState)(null),[Z,V]=(0,s.useState)(!1),{addItem:H}=(0,g.j)(),{isFavorite:q,toggleFavorite:G}=(0,b.r)(),{toast:Q}=function(){let[e,a]=s.useState(z);return s.useEffect(()=>(N.push(a),()=>{let e=N.indexOf(a);e>-1&&N.splice(e,1)}),[e]),{...e,toast:S,dismiss:e=>I({type:"DISMISS_TOAST",toastId:e})}}();(0,s.useEffect)(()=>{if(t.variants&&Array.isArray(t.variants)&&t.variants.length>0){let e=t.variants.filter(e=>"COLOR"===e.type),a=t.variants.filter(e=>"SIZE"===e.type);e.length>0&&E(e[0].value),a.length>0&&O(a[0].value)}},[t]),(0,s.useEffect)(()=>{let e=async()=>{if(v&&t._id)try{V(!0),console.log("Fetching complete product data for:",t._id);let e=await A.h.products.getById(t._id);console.log("Complete product data:",e);let a=e;e&&!0===e.success&&e.data&&e.data.product&&(a=e.data.product,console.log("Using nested data.product format")),M(a),P(0)}catch(e){console.error("Error fetching complete product data:",e),M(t)}finally{V(!1)}};e()},[v,t._id]);let X=async()=>{try{await G(K._id),q(K._id)?Q({title:"Товар удален из избранного",description:"".concat(K.name," удален из избранного")}):Q({title:"Товар добавлен в избранное",description:"".concat(K.name," добавлен в избранное")})}catch(e){Q({title:"Ошибка",description:"Не удалось добавить товар в избранное",variant:"destructive"})}},J=async e=>{e.preventDefault(),e.stopPropagation(),await X()},K=B||t,W=Array.from(new Set(K.variants&&Array.isArray(K.variants)?K.variants.filter(e=>"COLOR"===e.type).map(e=>e.value):[])),Y=Array.from(new Set(K.variants&&Array.isArray(K.variants)?K.variants.filter(e=>"SIZE"===e.type).map(e=>e.value):[]));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(p.Vq,{open:v,onOpenChange:e=>{e||k(!1)},children:[(0,r.jsx)(p.hg,{asChild:!0,onClick:e=>{e.preventDefault(),e.stopPropagation(),k(!0)},children:w}),(0,r.jsx)(p.cZ,{className:"max-w-4xl max-h-[90vh] overflow-y-auto p-0 sm:p-6 rounded-xl border-none shadow-2xl bg-gradient-to-b from-cream-50 to-white",onClick:e=>e.stopPropagation(),children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[(0,r.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,r.jsx)("div",{className:"relative aspect-square overflow-hidden rounded-xl shadow-lg border border-secondary-100 premium-shadow bg-secondary-50",children:Z?(0,r.jsx)("div",{className:"flex items-center justify-center h-full bg-secondary-50",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-400"})}):K.images&&K.images.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.w,{src:K.images[U].url,thumbnailSrc:K.images[U].thumbnailUrl,alt:K.images[U].alt||K.name,className:"w-full h-full object-cover"}),K.images.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.z,{variant:"ghost",size:"icon",className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm hover:bg-white rounded-full z-10 w-12 h-12 border border-primary-100 hover:border-primary-200 hover:scale-[1.03] transition-transform",onClick:()=>{K.images&&!(K.images.length<=1)&&P(e=>(e-1+K.images.length)%K.images.length)},children:(0,r.jsx)(l.Z,{className:"w-5 h-5 text-charcoal-700"})}),(0,r.jsx)(u.z,{variant:"ghost",size:"icon",className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm hover:bg-white rounded-full z-10 w-12 h-12 border border-primary-100 hover:border-primary-200 hover:scale-[1.03] transition-transform",onClick:()=>{K.images&&!(K.images.length<=1)&&P(e=>(e+1)%K.images.length)},children:(0,r.jsx)(i.Z,{className:"w-5 h-5 text-charcoal-700"})})]}),(0,r.jsxs)("div",{className:"absolute top-4 left-4 flex flex-col space-y-2 z-10",children:[K.isBrandNew&&(0,r.jsx)("span",{className:"bg-gradient-to-r from-gold-400 to-gold-600 text-white text-xs px-3 py-1 rounded-full font-semibold shadow-md",children:"НОВОЕ"}),K.isOnSale&&(0,r.jsx)("span",{className:"bg-gradient-to-r from-accent-500 to-accent-600 text-white text-xs px-3 py-1 rounded-full font-semibold shadow-md",children:"-20%"})]}),K.country&&(0,r.jsx)("div",{className:"absolute bottom-4 left-4",children:(0,r.jsx)("span",{className:"bg-white/90 backdrop-blur-sm text-charcoal-700 text-xs px-4 py-1.5 rounded-full font-medium shadow-sm border border-white/50",children:K.country})})]}):K.mainImage?(0,r.jsx)(F.w,{src:K.mainImage,alt:K.name,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"flex items-center justify-center h-full bg-secondary-50",children:(0,r.jsx)("span",{className:"text-charcoal-500",children:"Нет изображения"})})}),!Z&&K.images&&K.images.length>1&&(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 sm:gap-4",children:K.images.map((e,a)=>(0,r.jsx)("button",{className:(0,C.cn)("relative overflow-hidden rounded-xl h-20 transition-all cursor-pointer shadow-md hover:shadow-lg",U===a?"border-2 border-primary-500 ring-2 ring-primary-200 scale-105":"border border-secondary-100 hover:border-primary-200"),onClick:()=>P(a),children:(0,r.jsx)(F.w,{src:e.url,thumbnailSrc:e.thumbnailUrl,alt:e.alt||"".concat(K.name," ").concat(a+1),className:"w-full h-full object-cover"})},a))})]}),(0,r.jsxs)("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6 md:p-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between mb-3 gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-charcoal-500 uppercase tracking-wider font-medium bg-secondary-50 px-3 py-1 rounded-full",children:(null===(a=K.category)||void 0===a?void 0:a.name)||""}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 bg-gold-50 px-2 py-1 rounded-full",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4 fill-gold-500 text-gold-500"}),(0,r.jsx)("span",{className:"text-sm text-charcoal-700 font-medium",children:K.rating||4.5})]})]}),(0,r.jsx)("h2",{className:"font-display text-xl sm:text-2xl lg:text-3xl font-bold text-charcoal-800 mb-3 sm:mb-4 tracking-tight",children:K.name}),(0,r.jsx)("p",{className:"text-charcoal-600 leading-relaxed line-clamp-2 sm:line-clamp-3 mb-3 sm:mb-4 text-sm sm:text-base",children:K.description})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-secondary-100 overflow-hidden",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"flex-1 p-4",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-charcoal-800",children:[new Intl.NumberFormat("ru-RU").format(K.price)," ₽"]}),K.originalPrice&&(0,r.jsxs)("span",{className:"text-sm text-charcoal-500 line-through ml-2",children:[new Intl.NumberFormat("ru-RU").format(K.originalPrice)," ₽"]})]}),K.isOnSale&&(0,r.jsx)("div",{className:"bg-gradient-to-r from-accent-500 to-accent-600 text-white text-xs px-4 py-2 h-full flex items-center font-semibold",children:"Скидка"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[W.length>0&&(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-secondary-100 p-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-0",children:[(0,r.jsx)("h3",{className:"font-medium text-charcoal-800 sm:w-24",children:"Цвет"}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(h.c,{colors:W,selectedColor:j||void 0,onColorChange:E,compact:!0})})]})}),Y.length>0&&(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-secondary-100 p-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-0",children:[(0,r.jsx)("h3",{className:"font-medium text-charcoal-800 sm:w-24",children:"Размер"}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:Y.map(e=>(0,r.jsx)(u.z,{variant:T===e?"default":"outline",size:"sm",className:T===e?"bg-gradient-to-r from-primary-400 to-primary-500 text-primary-900 shadow-sm h-8 min-w-[40px]":"border border-secondary-200 hover:border-primary-300 hover:text-primary-600 h-8 min-w-[40px]",onClick:()=>O(e),children:e},e))})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-secondary-100 p-4",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,r.jsx)("h3",{className:"font-medium text-charcoal-800",children:"Количество"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[(0,r.jsxs)("div",{className:"flex items-center border border-secondary-200 rounded-lg w-fit",children:[(0,r.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>D(Math.max(1,_-1)),disabled:_<=1,className:"hover:bg-secondary-50 hover:text-primary-600 h-9 w-9",children:(0,r.jsx)(m.Z,{className:"w-4 h-4 text-charcoal-700"})}),(0,r.jsx)("span",{className:"px-4 text-center min-w-[40px] text-charcoal-800 font-medium",children:_}),(0,r.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>D(Math.min(K.stock,_+1)),disabled:_>=K.stock,className:"hover:bg-secondary-50 hover:text-primary-600 h-9 w-9",children:(0,r.jsx)(f.Z,{className:"w-4 h-4 text-charcoal-700"})})]}),(0,r.jsx)("span",{className:"text-sm font-medium px-3 py-1 rounded-full ".concat(K.stock>0?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:K.stock>0?"В наличии: ".concat(K.stock," шт."):"Нет в наличии"})]})]})})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-3 sm:pt-4",children:[(0,r.jsxs)(u.z,{onClick:()=>{if(!j&&!T){Q({title:"Ошибка",description:"Пожалуйста, выберите цвет или размер",variant:"destructive"});return}if(K.stock<_){Q({title:"Ошибка",description:"Недостаточно товара на складе",variant:"destructive"});return}H(K,_,T||void 0,j||void 0),Q({title:"Товар добавлен в корзину",description:"".concat(K.name," добавлен в корзину")}),k(!1)},disabled:0===K.stock,className:"flex-1 py-6 bg-gradient-to-r from-primary-400 to-primary-500 hover:from-primary-500 hover:to-primary-600 text-primary-900 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5 mr-2"}),K.stock>0?"Добавить в корзину":"Нет в наличии"]}),(0,r.jsx)(u.z,{variant:"outline",size:"icon",className:"rounded-full w-14 h-14 border-2 border-secondary-200 hover:border-accent-300 hover:text-accent-500 shadow-md hover:shadow-lg transform hover:-translate-y-1 transition-all duration-300",onClick:J,children:(0,r.jsx)(x.Z,{className:"w-6 h-6 ".concat(q(K._id)?"fill-accent-500 text-accent-500":"")})})]}),(0,r.jsx)("div",{className:"pt-2",children:(0,r.jsx)(u.z,{asChild:!0,variant:"ghost",className:"w-full hover:bg-secondary-50 hover:text-primary-600",children:(0,r.jsx)(n(),{href:"/product/".concat(K.slug),children:"Перейти на страницу товара"})})})]})]})})]}),(0,r.jsx)(y.Q,{isOpen:R,onClose:()=>L(!1),message:"Для добавления товара в избранное необходимо войти в систему"})]})}},7960:function(e,a,t){t.r(a),t.d(a,{AnimationProvider:function(){return d},AnimationStyles:function(){return f},BounceIn:function(){return c},FadeIn:function(){return n},Pulse:function(){return m},ScaleIn:function(){return i},SlideIn:function(){return l}});var r=t(7437),s=t(1787),o=t.n(s);t(2265);let n=e=>{let{children:a,duration:t=300,delay:s=0,className:o=""}=e;return(0,r.jsx)("div",{className:o,style:{animation:"fadeIn ".concat(t,"ms ease-in-out ").concat(s,"ms forwards"),opacity:0},children:a})},l=e=>{let{children:a,direction:t="up",duration:s=300,delay:o=0,className:n=""}=e;return(0,r.jsx)("div",{className:n,style:{animation:"".concat((()=>{switch(t){case"left":return"slideInLeft";case"right":return"slideInRight";case"down":return"slideInDown";default:return"slideInUp"}})()," ").concat(s,"ms ease-out ").concat(o,"ms forwards"),opacity:0},children:a})},i=e=>{let{children:a,duration:t=300,delay:s=0,className:o=""}=e;return(0,r.jsx)("div",{className:o,style:{animation:"scaleIn ".concat(t,"ms ease-out ").concat(s,"ms forwards"),opacity:0},children:a})},c=e=>{let{children:a,duration:t=600,delay:s=0,className:o=""}=e;return(0,r.jsx)("div",{className:o,style:{animation:"bounceIn ".concat(t,"ms ease-out ").concat(s,"ms forwards"),opacity:0},children:a})},m=e=>{let{children:a,duration:t=1e3,infinite:s=!1,className:o=""}=e;return(0,r.jsx)("div",{className:o,style:{animation:"pulse ".concat(t,"ms ease-in-out ").concat(s?"infinite":"forwards")},children:a})},f=()=>(0,r.jsx)(o(),{id:"22e247735b8601bc",children:"@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-moz-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-o-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes slideInUp{from{-webkit-transform:translatey(20px);transform:translatey(20px);opacity:0}to{-webkit-transform:translatey(0);transform:translatey(0);opacity:1}}@-moz-keyframes slideInUp{from{-moz-transform:translatey(20px);transform:translatey(20px);opacity:0}to{-moz-transform:translatey(0);transform:translatey(0);opacity:1}}@-o-keyframes slideInUp{from{-o-transform:translatey(20px);transform:translatey(20px);opacity:0}to{-o-transform:translatey(0);transform:translatey(0);opacity:1}}@keyframes slideInUp{from{-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px);opacity:0}to{-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0);opacity:1}}@-webkit-keyframes slideInDown{from{-webkit-transform:translatey(-20px);transform:translatey(-20px);opacity:0}to{-webkit-transform:translatey(0);transform:translatey(0);opacity:1}}@-moz-keyframes slideInDown{from{-moz-transform:translatey(-20px);transform:translatey(-20px);opacity:0}to{-moz-transform:translatey(0);transform:translatey(0);opacity:1}}@-o-keyframes slideInDown{from{-o-transform:translatey(-20px);transform:translatey(-20px);opacity:0}to{-o-transform:translatey(0);transform:translatey(0);opacity:1}}@keyframes slideInDown{from{-webkit-transform:translatey(-20px);-moz-transform:translatey(-20px);-o-transform:translatey(-20px);transform:translatey(-20px);opacity:0}to{-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0);opacity:1}}@-webkit-keyframes slideInLeft{from{-webkit-transform:translatex(-20px);transform:translatex(-20px);opacity:0}to{-webkit-transform:translatex(0);transform:translatex(0);opacity:1}}@-moz-keyframes slideInLeft{from{-moz-transform:translatex(-20px);transform:translatex(-20px);opacity:0}to{-moz-transform:translatex(0);transform:translatex(0);opacity:1}}@-o-keyframes slideInLeft{from{-o-transform:translatex(-20px);transform:translatex(-20px);opacity:0}to{-o-transform:translatex(0);transform:translatex(0);opacity:1}}@keyframes slideInLeft{from{-webkit-transform:translatex(-20px);-moz-transform:translatex(-20px);-o-transform:translatex(-20px);transform:translatex(-20px);opacity:0}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0);opacity:1}}@-webkit-keyframes slideInRight{from{-webkit-transform:translatex(20px);transform:translatex(20px);opacity:0}to{-webkit-transform:translatex(0);transform:translatex(0);opacity:1}}@-moz-keyframes slideInRight{from{-moz-transform:translatex(20px);transform:translatex(20px);opacity:0}to{-moz-transform:translatex(0);transform:translatex(0);opacity:1}}@-o-keyframes slideInRight{from{-o-transform:translatex(20px);transform:translatex(20px);opacity:0}to{-o-transform:translatex(0);transform:translatex(0);opacity:1}}@keyframes slideInRight{from{-webkit-transform:translatex(20px);-moz-transform:translatex(20px);-o-transform:translatex(20px);transform:translatex(20px);opacity:0}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0);opacity:1}}@-webkit-keyframes scaleIn{from{-webkit-transform:scale(.9);transform:scale(.9);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:1}}@-moz-keyframes scaleIn{from{-moz-transform:scale(.9);transform:scale(.9);opacity:0}to{-moz-transform:scale(1);transform:scale(1);opacity:1}}@-o-keyframes scaleIn{from{-o-transform:scale(.9);transform:scale(.9);opacity:0}to{-o-transform:scale(1);transform:scale(1);opacity:1}}@keyframes scaleIn{from{-webkit-transform:scale(.9);-moz-transform:scale(.9);-o-transform:scale(.9);transform:scale(.9);opacity:0}to{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1);opacity:1}}@-webkit-keyframes bounceIn{0%{opacity:0;-webkit-transform:scale(.3);transform:scale(.3)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(.9);transform:scale(.9)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@-moz-keyframes bounceIn{0%{opacity:0;-moz-transform:scale(.3);transform:scale(.3)}50%{opacity:1;-moz-transform:scale(1.05);transform:scale(1.05)}70%{-moz-transform:scale(.9);transform:scale(.9)}100%{opacity:1;-moz-transform:scale(1);transform:scale(1)}}@-o-keyframes bounceIn{0%{opacity:0;-o-transform:scale(.3);transform:scale(.3)}50%{opacity:1;-o-transform:scale(1.05);transform:scale(1.05)}70%{-o-transform:scale(.9);transform:scale(.9)}100%{opacity:1;-o-transform:scale(1);transform:scale(1)}}@keyframes bounceIn{0%{opacity:0;-webkit-transform:scale(.3);-moz-transform:scale(.3);-o-transform:scale(.3);transform:scale(.3)}50%{opacity:1;-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(.9);-moz-transform:scale(.9);-o-transform:scale(.9);transform:scale(.9)}100%{opacity:1;-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}@-webkit-keyframes pulse{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(1);transform:scale(1)}}@-moz-keyframes pulse{0%{-moz-transform:scale(1);transform:scale(1)}50%{-moz-transform:scale(1.05);transform:scale(1.05)}100%{-moz-transform:scale(1);transform:scale(1)}}@-o-keyframes pulse{0%{-o-transform:scale(1);transform:scale(1)}50%{-o-transform:scale(1.05);transform:scale(1.05)}100%{-o-transform:scale(1);transform:scale(1)}}@keyframes pulse{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}@-webkit-keyframes shake{0%,100%{-webkit-transform:translatex(0);transform:translatex(0)}10%,30%,50%,70%,90%{-webkit-transform:translatex(-5px);transform:translatex(-5px)}20%,40%,60%,80%{-webkit-transform:translatex(5px);transform:translatex(5px)}}@-moz-keyframes shake{0%,100%{-moz-transform:translatex(0);transform:translatex(0)}10%,30%,50%,70%,90%{-moz-transform:translatex(-5px);transform:translatex(-5px)}20%,40%,60%,80%{-moz-transform:translatex(5px);transform:translatex(5px)}}@-o-keyframes shake{0%,100%{-o-transform:translatex(0);transform:translatex(0)}10%,30%,50%,70%,90%{-o-transform:translatex(-5px);transform:translatex(-5px)}20%,40%,60%,80%{-o-transform:translatex(5px);transform:translatex(5px)}}@keyframes shake{0%,100%{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}10%,30%,50%,70%,90%{-webkit-transform:translatex(-5px);-moz-transform:translatex(-5px);-o-transform:translatex(-5px);transform:translatex(-5px)}20%,40%,60%,80%{-webkit-transform:translatex(5px);-moz-transform:translatex(5px);-o-transform:translatex(5px);transform:translatex(5px)}}.shake{-webkit-animation:shake.5s ease-in-out;-moz-animation:shake.5s ease-in-out;-o-animation:shake.5s ease-in-out;animation:shake.5s ease-in-out}@-webkit-keyframes spin{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.spin{-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite}"}),d=e=>{let{children:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{}),a]})}},1945:function(e,a,t){t.d(a,{w:function(){return n}});var r=t(7437),s=t(2265);let o=e=>{let{className:a="",width:t="100%",height:s="100%"}=e;return(0,r.jsx)("div",{className:"animate-pulse bg-gray-200 rounded-lg ".concat(a),style:{width:t,height:s},children:(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-gray-400",children:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})})})})},n=e=>{let{src:a,alt:t,thumbnailSrc:n,className:l="",width:i="100%",height:c="100%",onClick:m}=e,[f,d]=(0,s.useState)(!1),[x,p]=(0,s.useState)(!0),[u,h]=(0,s.useState)(!1),[y,g]=(0,s.useState)(!1),b=(0,s.useRef)(null),w=e=>e?e.replace("https://api.dvberry.ru",""):e,v=w(a),k=n?w(n):void 0;(0,s.useEffect)(()=>{let e=new IntersectionObserver(a=>{let[t]=a;t.isIntersecting&&(j(),e.disconnect())},{threshold:.1});return b.current&&e.observe(b.current),()=>{e.disconnect()}},[]);let j=()=>{if(p(!0),h(!1),n&&!y){let e=new Image;e.onload=()=>{d(!0),p(!1),setTimeout(()=>{g(!0)},300)},e.onerror=()=>{h(!0),p(!1)},e.src=k||""}else{let e=new Image;e.onload=()=>{d(!0),p(!1)},e.onerror=()=>{h(!0),p(!1)},e.src=v}};return(0,r.jsxs)("div",{className:"relative overflow-hidden ".concat(l),style:{width:i,height:c},onClick:()=>{m&&m()},children:[x&&(0,r.jsx)(o,{width:i,height:c,className:"absolute inset-0"}),u?(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 rounded-lg",children:(0,r.jsxs)("div",{className:"text-gray-400 text-center",children:[(0,r.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),(0,r.jsx)("p",{className:"text-sm",children:"Ошибка загрузки"})]})}):(0,r.jsx)("img",{ref:b,src:y?v:k||v,alt:t,className:"w-full h-full object-cover transition-opacity duration-300 ".concat(f?"opacity-100":"opacity-0"),style:{width:i,height:c}}),x&&f&&(0,r.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-50 transition-opacity duration-300 opacity-0"})]})}},9613:function(e,a,t){t.r(a),t.d(a,{ButtonLoader:function(){return n},CardSkeleton:function(){return i},FormSkeleton:function(){return m},Loader:function(){return s},PageLoader:function(){return o},ProductCardSkeleton:function(){return l},TableSkeleton:function(){return c}});var r=t(7437);t(2265);let s=e=>{let{size:a="md",variant:t="default",text:s,className:o="",containerClassName:n=""}=e;return(0,r.jsx)("div",{className:"".concat({default:"flex items-center justify-center",button:"inline-flex items-center justify-center",inline:"inline-flex items-center",page:"fixed inset-0 z-[9999] flex items-center justify-center bg-white/80 backdrop-blur-sm"}[t]," ").concat(n),children:(0,r.jsxs)("div",{className:"".concat({default:"",button:"",inline:"",page:"bg-white p-8 rounded-2xl shadow-xl border border-secondary-100 premium-shadow flex flex-col items-center"}[t]),children:[(0,r.jsxs)("div",{className:"relative ".concat({xs:"w-4 h-4",sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16",xl:"w-24 h-24",full:"w-32 h-32"}[a]," ").concat(o),children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-primary-300 to-gold-300 p-[2px]",children:(0,r.jsx)("div",{className:"absolute inset-0 rounded-full bg-white"})}),(0,r.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-transparent animate-spin",style:{borderLeftColor:"#ffd091",borderTopColor:"#ffd091",animationDuration:"0.8s"}}),(0,r.jsx)("div",{className:"absolute inset-[15%] rounded-full bg-gradient-to-br from-primary-50 to-cream-50 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-primary-500 font-bold text-[40%]",children:"DB"})})]}),s&&(0,r.jsx)("p",{className:"mt-4 ".concat({xs:"text-xs",sm:"text-xs",md:"text-sm",lg:"text-base",xl:"text-lg",full:"text-xl"}[a]," text-charcoal-600 font-medium"),children:s})]})})},o=e=>(0,r.jsx)(s,{variant:"page",size:"xl",text:"Загрузка...",...e}),n=e=>(0,r.jsx)(s,{variant:"button",size:"sm",...e}),l=e=>{let{count:a=6,...t}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:Array.from({length:a}).map((e,a)=>(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-secondary-100 h-[400px] flex items-center justify-center",children:(0,r.jsx)(s,{size:"lg",text:"Загрузка...",...t})},a))})},i=l,c=e=>(0,r.jsx)("div",{className:"p-8 text-center",children:(0,r.jsx)(s,{size:"lg",text:"Загрузка таблицы...",...e})}),m=e=>(0,r.jsx)("div",{className:"p-8 text-center",children:(0,r.jsx)(s,{size:"lg",text:"Загрузка формы...",...e})});a.default=s},1609:function(e,a,t){t.d(a,{r:function(){return o}});var r=t(2265),s=t(164);let o=()=>{let[e,a]=(0,r.useState)([]),[t,o]=(0,r.useState)(!0),[n,l]=(0,r.useState)(!1),[i,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=async()=>{try{let e=await s.h.auth.getProfile().catch(()=>null);if(l(!!e),e){o(!0);let e=await s.h.favorites.get();a(e.map(e=>e._id))}}catch(e){console.error("Failed to check auth or load favorites:",e)}finally{o(!1)}};e()},[]);let m=a=>e.includes(a),f=async e=>{if(console.log("toggleFavorite called, isLoggedIn:",n),!n){console.log("User not logged in, showing auth modal"),c(!0);return}try{console.log("User is logged in, toggling favorite"),m(e)?(await s.h.favorites.remove(e),a(a=>a.filter(a=>a!==e))):(await s.h.favorites.add(e),a(a=>[...a,e]))}catch(e){throw console.error("Failed to toggle favorite:",e),e}};return{favorites:e,loading:t,isLoggedIn:n,showAuthModal:i,setShowAuthModal:c,isFavorite:m,toggleFavorite:f}}},8188:function(e,a,t){t.d(a,{OA:function(){return s}});let r=[{name:"Черный",value:"#000000"},{name:"Белый",value:"#FFFFFF"},{name:"Красный",value:"#FF0000"},{name:"Синий",value:"#0000FF"},{name:"Зеленый",value:"#008000"},{name:"Желтый",value:"#FFFF00"},{name:"Оранжевый",value:"#FFA500"},{name:"Фиолетовый",value:"#800080"},{name:"Розовый",value:"#FFC0CB"},{name:"Коричневый",value:"#A52A2A"},{name:"Серый",value:"#808080"},{name:"Бежевый",value:"#F5F5DC"},{name:"Бирюзовый",value:"#40E0D0"},{name:"Лавандовый",value:"#E6E6FA"},{name:"Мятный",value:"#98FB98"},{name:"Коралловый",value:"#FF7F50"},{name:"Индиго",value:"#4B0082"},{name:"Золотой",value:"#FFD700"},{name:"Серебряный",value:"#C0C0C0"},{name:"Бордовый",value:"#800000"}],s=e=>r.find(a=>a.name.toLowerCase()===e.toLowerCase())}}]);